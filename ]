[33mcommit 96769462f8a2b0dba33cc08ecf39f6e8dba0644d[m[33m ([m[1;36mHEAD[m[33m -> [m[1;32mmain[m[33m, [m[1;31morigin/master[m[33m)[m
Author: Sean Yang <sean87066@gmail.com>
Date:   Fri Mar 14 18:15:13 2025 +0800

    fisrt upload

[1mdiff --git a/LifeNotebook/.gitattributes b/LifeNotebook/.gitattributes[m
[1mnew file mode 100644[m
[1mindex 0000000..3b41682[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/.gitattributes[m
[36m@@ -0,0 +1,2 @@[m
[32m+[m[32m/mvnw text eol=lf[m
[32m+[m[32m*.cmd text eol=crlf[m
[1mdiff --git a/LifeNotebook/.gitignore b/LifeNotebook/.gitignore[m
[1mnew file mode 100644[m
[1mindex 0000000..549e00a[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/.gitignore[m
[36m@@ -0,0 +1,33 @@[m
[32m+[m[32mHELP.md[m
[32m+[m[32mtarget/[m
[32m+[m[32m!.mvn/wrapper/maven-wrapper.jar[m
[32m+[m[32m!**/src/main/**/target/[m
[32m+[m[32m!**/src/test/**/target/[m
[32m+[m
[32m+[m[32m### STS ###[m
[32m+[m[32m.apt_generated[m
[32m+[m[32m.classpath[m
[32m+[m[32m.factorypath[m
[32m+[m[32m.project[m
[32m+[m[32m.settings[m
[32m+[m[32m.springBeans[m
[32m+[m[32m.sts4-cache[m
[32m+[m
[32m+[m[32m### IntelliJ IDEA ###[m
[32m+[m[32m.idea[m
[32m+[m[32m*.iws[m
[32m+[m[32m*.iml[m
[32m+[m[32m*.ipr[m
[32m+[m
[32m+[m[32m### NetBeans ###[m
[32m+[m[32m/nbproject/private/[m
[32m+[m[32m/nbbuild/[m
[32m+[m[32m/dist/[m
[32m+[m[32m/nbdist/[m
[32m+[m[32m/.nb-gradle/[m
[32m+[m[32mbuild/[m
[32m+[m[32m!**/src/main/**/build/[m
[32m+[m[32m!**/src/test/**/build/[m
[32m+[m
[32m+[m[32m### VS Code ###[m
[32m+[m[32m.vscode/[m
[1mdiff --git a/LifeNotebook/.mvn/wrapper/maven-wrapper.properties b/LifeNotebook/.mvn/wrapper/maven-wrapper.properties[m
[1mnew file mode 100644[m
[1mindex 0000000..d58dfb7[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/.mvn/wrapper/maven-wrapper.properties[m
[36m@@ -0,0 +1,19 @@[m
[32m+[m[32m# Licensed to the Apache Software Foundation (ASF) under one[m
[32m+[m[32m# or more contributor license agreements.  See the NOTICE file[m
[32m+[m[32m# distributed with this work for additional information[m
[32m+[m[32m# regarding copyright ownership.  The ASF licenses this file[m
[32m+[m[32m# to you under the Apache License, Version 2.0 (the[m
[32m+[m[32m# "License"); you may not use this file except in compliance[m
[32m+[m[32m# with the License.  You may obtain a copy of the License at[m
[32m+[m[32m#[m
[32m+[m[32m#   http://www.apache.org/licenses/LICENSE-2.0[m
[32m+[m[32m#[m
[32m+[m[32m# Unless required by applicable law or agreed to in writing,[m
[32m+[m[32m# software distributed under the License is distributed on an[m
[32m+[m[32m# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY[m
[32m+[m[32m# KIND, either express or implied.  See the License for the[m
[32m+[m[32m# specific language governing permissions and limitations[m
[32m+[m[32m# under the License.[m
[32m+[m[32mwrapperVersion=3.3.2[m
[32m+[m[32mdistributionType=only-script[m
[32m+[m[32mdistributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.9.9/apache-maven-3.9.9-bin.zip[m
[1mdiff --git a/LifeNotebook/mvnw b/LifeNotebook/mvnw[m
[1mnew file mode 100644[m
[1mindex 0000000..19529dd[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/mvnw[m
[36m@@ -0,0 +1,259 @@[m
[32m+[m[32m#!/bin/sh[m
[32m+[m[32m# ----------------------------------------------------------------------------[m
[32m+[m[32m# Licensed to the Apache Software Foundation (ASF) under one[m
[32m+[m[32m# or more contributor license agreements.  See the NOTICE file[m
[32m+[m[32m# distributed with this work for additional information[m
[32m+[m[32m# regarding copyright ownership.  The ASF licenses this file[m
[32m+[m[32m# to you under the Apache License, Version 2.0 (the[m
[32m+[m[32m# "License"); you may not use this file except in compliance[m
[32m+[m[32m# with the License.  You may obtain a copy of the License at[m
[32m+[m[32m#[m
[32m+[m[32m#    http://www.apache.org/licenses/LICENSE-2.0[m
[32m+[m[32m#[m
[32m+[m[32m# Unless required by applicable law or agreed to in writing,[m
[32m+[m[32m# software distributed under the License is distributed on an[m
[32m+[m[32m# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY[m
[32m+[m[32m# KIND, either express or implied.  See the License for the[m
[32m+[m[32m# specific language governing permissions and limitations[m
[32m+[m[32m# under the License.[m
[32m+[m[32m# ----------------------------------------------------------------------------[m
[32m+[m
[32m+[m[32m# ----------------------------------------------------------------------------[m
[32m+[m[32m# Apache Maven Wrapper startup batch script, version 3.3.2[m
[32m+[m[32m#[m
[32m+[m[32m# Optional ENV vars[m
[32m+[m[32m# -----------------[m
[32m+[m[32m#   JAVA_HOME - location of a JDK home dir, required when download maven via java source[m
[32m+[m[32m#   MVNW_REPOURL - repo url base for downloading maven distribution[m
[32m+[m[32m#   MVNW_USERNAME/MVNW_PASSWORD - user and password for downloading maven[m
[32m+[m[32m#   MVNW_VERBOSE - true: enable verbose log; debug: trace the mvnw script; others: silence the output[m
[32m+[m[32m# ----------------------------------------------------------------------------[m
[32m+[m
[32m+[m[32mset -euf[m
[32m+[m[32m[ "${MVNW_VERBOSE-}" != debug ] || set -x[m
[32m+[m
[32m+[m[32m# OS specific support.[m
[32m+[m[32mnative_path() { printf %s\\n "$1"; }[m
[32m+[m[32mcase "$(uname)" in[m
[32m+[m[32mCYGWIN* | MINGW*)[m
[32m+[m[32m  [ -z "${JAVA_HOME-}" ] || JAVA_HOME="$(cygpath --unix "$JAVA_HOME")"[m
[32m+[m[32m  native_path() { cygpath --path --windows "$1"; }[m
[32m+[m[32m  ;;[m
[32m+[m[32mesac[m
[32m+[m
[32m+[m[32m# set JAVACMD and JAVACCMD[m
[32m+[m[32mset_java_home() {[m
[32m+[m[32m  # For Cygwin and MinGW, ensure paths are in Unix format before anything is touched[m
[32m+[m[32m  if [ -n "${JAVA_HOME-}" ]; then[m
[32m+[m[32m    if [ -x "$JAVA_HOME/jre/sh/java" ]; then[m
[32m+[m[32m      # IBM's JDK on AIX uses strange locations for the executables[m
[32m+[m[32m      JAVACMD="$JAVA_HOME/jre/sh/java"[m
[32m+[m[32m      JAVACCMD="$JAVA_HOME/jre/sh/javac"[m
[32m+[m[32m    else[m
[32m+[m[32m      JAVACMD="$JAVA_HOME/bin/java"[m
[32m+[m[32m      JAVACCMD="$JAVA_HOME/bin/javac"[m
[32m+[m
[32m+[m[32m      if [ ! -x "$JAVACMD" ] || [ ! -x "$JAVACCMD" ]; then[m
[32m+[m[32m        echo "The JAVA_HOME environment variable is not defined correctly, so mvnw cannot run." >&2[m
[32m+[m[32m        echo "JAVA_HOME is set to \"$JAVA_HOME\", but \"\$JAVA_HOME/bin/java\" or \"\$JAVA_HOME/bin/javac\" does not exist." >&2[m
[32m+[m[32m        return 1[m
[32m+[m[32m      fi[m
[32m+[m[32m    fi[m
[32m+[m[32m  else[m
[32m+[m[32m    JAVACMD="$([m
[32m+[m[32m      'set' +e[m
[32m+[m[32m      'unset' -f command 2>/dev/null[m
[32m+[m[32m      'command' -v java[m
[32m+[m[32m    )" || :[m
[32m+[m[32m    JAVACCMD="$([m
[32m+[m[32m      'set' +e[m
[32m+[m[32m      'unset' -f command 2>/dev/null[m
[32m+[m[32m      'command' -v javac[m
[32m+[m[32m    )" || :[m
[32m+[m
[32m+[m[32m    if [ ! -x "${JAVACMD-}" ] || [ ! -x "${JAVACCMD-}" ]; then[m
[32m+[m[32m      echo "The java/javac command does not exist in PATH nor is JAVA_HOME set, so mvnw cannot run." >&2[m
[32m+[m[32m      return 1[m
[32m+[m[32m    fi[m
[32m+[m[32m  fi[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m# hash string like Java String::hashCode[m
[32m+[m[32mhash_string() {[m
[32m+[m[32m  str="${1:-}" h=0[m
[32m+[m[32m  while [ -n "$str" ]; do[m
[32m+[m[32m    char="${str%"${str#?}"}"[m
[32m+[m[32m    h=$(((h * 31 + $(LC_CTYPE=C printf %d "'$char")) % 4294967296))[m
[32m+[m[32m    str="${str#?}"[m
[32m+[m[32m  done[m
[32m+[m[32m  printf %x\\n $h[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mverbose() { :; }[m
[32m+[m[32m[ "${MVNW_VERBOSE-}" != true ] || verbose() { printf %s\\n "${1-}"; }[m
[32m+[m
[32m+[m[32mdie() {[m
[32m+[m[32m  printf %s\\n "$1" >&2[m
[32m+[m[32m  exit 1[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mtrim() {[m
[32m+[m[32m  # MWRAPPER-139:[m
[32m+[m[32m  #   Trims trailing and leading whitespace, carriage returns, tabs, and linefeeds.[m
[32m+[m[32m  #   Needed for removing poorly interpreted newline sequences when running in more[m
[32m+[m[32m  #   exotic environments such as mingw bash on Windows.[m
[32m+[m[32m  printf "%s" "${1}" | tr -d '[:space:]'[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m# parse distributionUrl and optional distributionSha256Sum, requires .mvn/wrapper/maven-wrapper.properties[m
[32m+[m[32mwhile IFS="=" read -r key value; do[m
[32m+[m[32m  case "${key-}" in[m
[32m+[m[32m  distributionUrl) distributionUrl=$(trim "${value-}") ;;[m
[32m+[m[32m  distributionSha256Sum) distributionSha256Sum=$(trim "${value-}") ;;[m
[32m+[m[32m  esac[m
[32m+[m[32mdone <"${0%/*}/.mvn/wrapper/maven-wrapper.properties"[m
[32m+[m[32m[ -n "${distributionUrl-}" ] || die "cannot read distributionUrl property in ${0%/*}/.mvn/wrapper/maven-wrapper.properties"[m
[32m+[m
[32m+[m[32mcase "${distributionUrl##*/}" in[m
[32m+[m[32mmaven-mvnd-*bin.*)[m
[32m+[m[32m  MVN_CMD=mvnd.sh _MVNW_REPO_PATTERN=/maven/mvnd/[m
[32m+[m[32m  case "${PROCESSOR_ARCHITECTURE-}${PROCESSOR_ARCHITEW6432-}:$(uname -a)" in[m
[32m+[m[32m  *AMD64:CYGWIN* | *AMD64:MINGW*) distributionPlatform=windows-amd64 ;;[m
[32m+[m[32m  :Darwin*x86_64) distributionPlatform=darwin-amd64 ;;[m
[32m+[m[32m  :Darwin*arm64) distributionPlatform=darwin-aarch64 ;;[m
[32m+[m[32m  :Linux*x86_64*) distributionPlatform=linux-amd64 ;;[m
[32m+[m[32m  *)[m
[32m+[m[32m    echo "Cannot detect native platform for mvnd on $(uname)-$(uname -m), use pure java version" >&2[m
[32m+[m[32m    distributionPlatform=linux-amd64[m
[32m+[m[32m    ;;[m
[32m+[m[32m  esac[m
[32m+[m[32m  distributionUrl="${distributionUrl%-bin.*}-$distributionPlatform.zip"[m
[32m+[m[32m  ;;[m
[32m+[m[32mmaven-mvnd-*) MVN_CMD=mvnd.sh _MVNW_REPO_PATTERN=/maven/mvnd/ ;;[m
[32m+[m[32m*) MVN_CMD="mvn${0##*/mvnw}" _MVNW_REPO_PATTERN=/org/apache/maven/ ;;[m
[32m+[m[32mesac[m
[32m+[m
[32m+[m[32m# apply MVNW_REPOURL and calculate MAVEN_HOME[m
[32m+[m[32m# maven home pattern: ~/.m2/wrapper/dists/{apache-maven-<version>,maven-mvnd-<version>-<platform>}/<hash>[m
[32m+[m[32m[ -z "${MVNW_REPOURL-}" ] || distributionUrl="$MVNW_REPOURL$_MVNW_REPO_PATTERN${distributionUrl#*"$_MVNW_REPO_PATTERN"}"[m
[32m+[m[32mdistributionUrlName="${distributionUrl##*/}"[m
[32m+[m[32mdistributionUrlNameMain="${distributionUrlName%.*}"[m
[32m+[m[32mdistributionUrlNameMain="${distributionUrlNameMain%-bin}"[m
[32m+[m[32mMAVEN_USER_HOME="${MAVEN_USER_HOME:-${HOME}/.m2}"[m
[32m+[m[32mMAVEN_HOME="${MAVEN_USER_HOME}/wrapper/dists/${distributionUrlNameMain-}/$(hash_string "$distributionUrl")"[m
[32m+[m
[32m+[m[32mexec_maven() {[m
[32m+[m[32m  unset MVNW_VERBOSE MVNW_USERNAME MVNW_PASSWORD MVNW_REPOURL || :[m
[32m+[m[32m  exec "$MAVEN_HOME/bin/$MVN_CMD" "$@" || die "cannot exec $MAVEN_HOME/bin/$MVN_CMD"[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mif [ -d "$MAVEN_HOME" ]; then[m
[32m+[m[32m  verbose "found existing MAVEN_HOME at $MAVEN_HOME"[m
[32m+[m[32m  exec_maven "$@"[m
[32m+[m[32mfi[m
[32m+[m
[32m+[m[32mcase "${distributionUrl-}" in[m
[32m+[m[32m*?-bin.zip | *?maven-mvnd-?*-?*.zip) ;;[m
[32m+[m[32m*) die "distributionUrl is not valid, must match *-bin.zip or maven-mvnd-*.zip, but found '${distributionUrl-}'" ;;[m
[32m+[m[32mesac[m
[32m+[m
[32m+[m[32m# prepare tmp dir[m
[32m+[m[32mif TMP_DOWNLOAD_DIR="$(mktemp -d)" && [ -d "$TMP_DOWNLOAD_DIR" ]; then[m
[32m+[m[32m  clean() { rm -rf -- "$TMP_DOWNLOAD_DIR"; }[m
[32m+[m[32m  trap clean HUP INT TERM EXIT[m
[32m+[m[32melse[m
[32m+[m[32m  die "cannot create temp dir"[m
[32m+[m[32mfi[m
[32m+[m
[32m+[m[32mmkdir -p -- "${MAVEN_HOME%/*}"[m
[32m+[m
[32m+[m[32m# Download and Install Apache Maven[m
[32m+[m[32mverbose "Couldn't find MAVEN_HOME, downloading and installing it ..."[m
[32m+[m[32mverbose "Downloading from: $distributionUrl"[m
[32m+[m[32mverbose "Downloading to: $TMP_DOWNLOAD_DIR/$distributionUrlName"[m
[32m+[m
[32m+[m[32m# select .zip or .tar.gz[m
[32m+[m[32mif ! command -v unzip >/dev/null; then[m
[32m+[m[32m  distributionUrl="${distributionUrl%.zip}.tar.gz"[m
[32m+[m[32m  distributionUrlName="${distributionUrl##*/}"[m
[32m+[m[32mfi[m
[32m+[m
[32m+[m[32m# verbose opt[m
[32m+[m[32m__MVNW_QUIET_WGET=--quiet __MVNW_QUIET_CURL=--silent __MVNW_QUIET_UNZIP=-q __MVNW_QUIET_TAR=''[m
[32m+[m[32m[ "${MVNW_VERBOSE-}" != true ] || __MVNW_QUIET_WGET='' __MVNW_QUIET_CURL='' __MVNW_QUIET_UNZIP='' __MVNW_QUIET_TAR=v[m
[32m+[m
[32m+[m[32m# normalize http auth[m
[32m+[m[32mcase "${MVNW_PASSWORD:+has-password}" in[m
[32m+[m[32m'') MVNW_USERNAME='' MVNW_PASSWORD='' ;;[m
[32m+[m[32mhas-password) [ -n "${MVNW_USERNAME-}" ] || MVNW_USERNAME='' MVNW_PASSWORD='' ;;[m
[32m+[m[32mesac[m
[32m+[m
[32m+[m[32mif [ -z "${MVNW_USERNAME-}" ] && command -v wget >/dev/null; then[m
[32m+[m[32m  verbose "Found wget ... using wget"[m
[32m+[m[32m  wget ${__MVNW_QUIET_WGET:+"$__MVNW_QUIET_WGET"} "$distributionUrl" -O "$TMP_DOWNLOAD_DIR/$distributionUrlName" || die "wget: Failed to fetch $distributionUrl"[m
[32m+[m[32melif [ -z "${MVNW_USERNAME-}" ] && command -v curl >/dev/null; then[m
[32m+[m[32m  verbose "Found curl ... using curl"[m
[32m+[m[32m  curl ${__MVNW_QUIET_CURL:+"$__MVNW_QUIET_CURL"} -f -L -o "$TMP_DOWNLOAD_DIR/$distributionUrlName" "$distributionUrl" || die "curl: Failed to fetch $distributionUrl"[m
[32m+[m[32melif set_java_home; then[m
[32m+[m[32m  verbose "Falling back to use Java to download"[m
[32m+[m[32m  javaSource="$TMP_DOWNLOAD_DIR/Downloader.java"[m
[32m+[m[32m  targetZip="$TMP_DOWNLOAD_DIR/$distributionUrlName"[m
[32m+[m[32m  cat >"$javaSource" <<-END[m
[32m+[m	[32mpublic class Downloader extends java.net.Authenticator[m
[32m+[m	[32m{[m
[32m+[m	[32m  protected java.net.PasswordAuthentication getPasswordAuthentication()[m
[32m+[m	[32m  {[m
[32m+[m	[32m    return new java.net.PasswordAuthentication( System.getenv( "MVNW_USERNAME" ), System.getenv( "MVNW_PASSWORD" ).toCharArray() );[m
[32m+[m	[32m  }[m
[32m+[m	[32m  public static void main( String[] args ) throws Exception[m
[32m+[m	[32m  {[m
[32m+[m	[32m    setDefault( new Downloader() );[m
[32m+[m	[32m    java.nio.file.Files.copy( java.net.URI.create( args[0] ).toURL().openStream(), java.nio.file.Paths.get( args[1] ).toAbsolutePath().normalize() );[m
[32m+[m	[32m  }[m
[32m+[m	[32m}[m
[32m+[m	[32mEND[m
[32m+[m[32m  # For Cygwin/MinGW, switch paths to Windows format before running javac and java[m
[32m+[m[32m  verbose " - Compiling Downloader.java ..."[m
[32m+[m[32m  "$(native_path "$JAVACCMD")" "$(native_path "$javaSource")" || die "Failed to compile Downloader.java"[m
[32m+[m[32m  verbose " - Running Downloader.java ..."[m
[32m+[m[32m  "$(native_path "$JAVACMD")" -cp "$(native_path "$TMP_DOWNLOAD_DIR")" Downloader "$distributionUrl" "$(native_path "$targetZip")"[m
[32m+[m[32mfi[m
[32m+[m
[32m+[m[32m# If specified, validate the SHA-256 sum of the Maven distribution zip file[m
[32m+[m[32mif [ -n "${distributionSha256Sum-}" ]; then[m
[32m+[m[32m  distributionSha256Result=false[m
[32m+[m[32m  if [ "$MVN_CMD" = mvnd.sh ]; then[m
[32m+[m[32m    echo "Checksum validation is not supported for maven-mvnd." >&2[m
[32m+[m[32m    echo "Please disable validation by removing 'distributionSha256Sum' from your maven-wrapper.properties." >&2[m
[32m+[m[32m    exit 1[m
[32m+[m[32m  elif command -v sha256sum >/dev/null; then[m
[32m+[m[32m    if echo "$distributionSha256Sum  $TMP_DOWNLOAD_DIR/$distributionUrlName" | sha256sum -c >/dev/null 2>&1; then[m
[32m+[m[32m      distributionSha256Result=true[m
[32m+[m[32m    fi[m
[32m+[m[32m  elif command -v shasum >/dev/null; then[m
[32m+[m[32m    if echo "$distributionSha256Sum  $TMP_DOWNLOAD_DIR/$distributionUrlName" | shasum -a 256 -c >/dev/null 2>&1; then[m
[32m+[m[32m      distributionSha256Result=true[m
[32m+[m[32m    fi[m
[32m+[m[32m  else[m
[32m+[m[32m    echo "Checksum validation was requested but neither 'sha256sum' or 'shasum' are available." >&2[m
[32m+[m[32m    echo "Please install either command, or disable validation by removing 'distributionSha256Sum' from your maven-wrapper.properties." >&2[m
[32m+[m[32m    exit 1[m
[32m+[m[32m  fi[m
[32m+[m[32m  if [ $distributionSha256Result = false ]; then[m
[32m+[m[32m    echo "Error: Failed to validate Maven distribution SHA-256, your Maven distribution might be compromised." >&2[m
[32m+[m[32m    echo "If you updated your Maven version, you need to update the specified distributionSha256Sum property." >&2[m
[32m+[m[32m    exit 1[m
[32m+[m[32m  fi[m
[32m+[m[32mfi[m
[32m+[m
[32m+[m[32m# unzip and move[m
[32m+[m[32mif command -v unzip >/dev/null; then[m
[32m+[m[32m  unzip ${__MVNW_QUIET_UNZIP:+"$__MVNW_QUIET_UNZIP"} "$TMP_DOWNLOAD_DIR/$distributionUrlName" -d "$TMP_DOWNLOAD_DIR" || die "failed to unzip"[m
[32m+[m[32melse[m
[32m+[m[32m  tar xzf${__MVNW_QUIET_TAR:+"$__MVNW_QUIET_TAR"} "$TMP_DOWNLOAD_DIR/$distributionUrlName" -C "$TMP_DOWNLOAD_DIR" || die "failed to untar"[m
[32m+[m[32mfi[m
[32m+[m[32mprintf %s\\n "$distributionUrl" >"$TMP_DOWNLOAD_DIR/$distributionUrlNameMain/mvnw.url"[m
[32m+[m[32mmv -- "$TMP_DOWNLOAD_DIR/$distributionUrlNameMain" "$MAVEN_HOME" || [ -d "$MAVEN_HOME" ] || die "fail to move MAVEN_HOME"[m
[32m+[m
[32m+[m[32mclean || :[m
[32m+[m[32mexec_maven "$@"[m
[1mdiff --git a/LifeNotebook/mvnw.cmd b/LifeNotebook/mvnw.cmd[m
[1mnew file mode 100644[m
[1mindex 0000000..249bdf3[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/mvnw.cmd[m
[36m@@ -0,0 +1,149 @@[m
[32m+[m[32m<# : batch portion[m
[32m+[m[32m@REM ----------------------------------------------------------------------------[m
[32m+[m[32m@REM Licensed to the Apache Software Foundation (ASF) under one[m
[32m+[m[32m@REM or more contributor license agreements.  See the NOTICE file[m
[32m+[m[32m@REM distributed with this work for additional information[m
[32m+[m[32m@REM regarding copyright ownership.  The ASF licenses this file[m
[32m+[m[32m@REM to you under the Apache License, Version 2.0 (the[m
[32m+[m[32m@REM "License"); you may not use this file except in compliance[m
[32m+[m[32m@REM with the License.  You may obtain a copy of the License at[m
[32m+[m[32m@REM[m
[32m+[m[32m@REM    http://www.apache.org/licenses/LICENSE-2.0[m
[32m+[m[32m@REM[m
[32m+[m[32m@REM Unless required by applicable law or agreed to in writing,[m
[32m+[m[32m@REM software distributed under the License is distributed on an[m
[32m+[m[32m@REM "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY[m
[32m+[m[32m@REM KIND, either express or implied.  See the License for the[m
[32m+[m[32m@REM specific language governing permissions and limitations[m
[32m+[m[32m@REM under the License.[m
[32m+[m[32m@REM ----------------------------------------------------------------------------[m
[32m+[m
[32m+[m[32m@REM ----------------------------------------------------------------------------[m
[32m+[m[32m@REM Apache Maven Wrapper startup batch script, version 3.3.2[m
[32m+[m[32m@REM[m
[32m+[m[32m@REM Optional ENV vars[m
[32m+[m[32m@REM   MVNW_REPOURL - repo url base for downloading maven distribution[m
[32m+[m[32m@REM   MVNW_USERNAME/MVNW_PASSWORD - user and password for downloading maven[m
[32m+[m[32m@REM   MVNW_VERBOSE - true: enable verbose log; others: silence the output[m
[32m+[m[32m@REM ----------------------------------------------------------------------------[m
[32m+[m
[32m+[m[32m@IF "%__MVNW_ARG0_NAME__%"=="" (SET __MVNW_ARG0_NAME__=%~nx0)[m
[32m+[m[32m@SET __MVNW_CMD__=[m
[32m+[m[32m@SET __MVNW_ERROR__=[m
[32m+[m[32m@SET __MVNW_PSMODULEP_SAVE=%PSModulePath%[m
[32m+[m[32m@SET PSModulePath=[m
[32m+[m[32m@FOR /F "usebackq tokens=1* delims==" %%A IN (`powershell -noprofile "& {$scriptDir='%~dp0'; $script='%__MVNW_ARG0_NAME__%'; icm -ScriptBlock ([Scriptblock]::Create((Get-Content -Raw '%~f0'))) -NoNewScope}"`) DO @([m
[32m+[m[32m  IF "%%A"=="MVN_CMD" (set __MVNW_CMD__=%%B) ELSE IF "%%B"=="" (echo %%A) ELSE (echo %%A=%%B)[m
[32m+[m[32m)[m
[32m+[m[32m@SET PSModulePath=%__MVNW_PSMODULEP_SAVE%[m
[32m+[m[32m@SET __MVNW_PSMODULEP_SAVE=[m
[32m+[m[32m@SET __MVNW_ARG0_NAME__=[m
[32m+[m[32m@SET MVNW_USERNAME=[m
[32m+[m[32m@SET MVNW_PASSWORD=[m
[32m+[m[32m@IF NOT "%__MVNW_CMD__%"=="" (%__MVNW_CMD__% %*)[m
[32m+[m[32m@echo Cannot start maven from wrapper >&2 && exit /b 1[m
[32m+[m[32m@GOTO :EOF[m
[32m+[m[32m: end batch / begin powershell #>[m
[32m+[m
[32m+[m[32m$ErrorActionPreference = "Stop"[m
[32m+[m[32mif ($env:MVNW_VERBOSE -eq "true") {[m
[32m+[m[32m  $VerbosePreference = "Continue"[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m# calculate distributionUrl, requires .mvn/wrapper/maven-wrapper.properties[m
[32m+[m[32m$distributionUrl = (Get-Content -Raw "$scriptDir/.mvn/wrapper/maven-wrapper.properties" | ConvertFrom-StringData).distributionUrl[m
[32m+[m[32mif (!$distributionUrl) {[m
[32m+[m[32m  Write-Error "cannot read distributionUrl property in $scriptDir/.mvn/wrapper/maven-wrapper.properties"[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mswitch -wildcard -casesensitive ( $($distributionUrl -replace '^.*/','') ) {[m
[32m+[m[32m  "maven-mvnd-*" {[m
[32m+[m[32m    $USE_MVND = $true[m
[32m+[m[32m    $distributionUrl = $distributionUrl -replace '-bin\.[^.]*$',"-windows-amd64.zip"[m
[32m+[m[32m    $MVN_CMD = "mvnd.cmd"[m
[32m+[m[32m    break[m
[32m+[m[32m  }[m
[32m+[m[32m  default {[m
[32m+[m[32m    $USE_MVND = $false[m
[32m+[m[32m    $MVN_CMD = $script -replace '^mvnw','mvn'[m
[32m+[m[32m    break[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m# apply MVNW_REPOURL and calculate MAVEN_HOME[m
[32m+[m[32m# maven home pattern: ~/.m2/wrapper/dists/{apache-maven-<version>,maven-mvnd-<version>-<platform>}/<hash>[m
[32m+[m[32mif ($env:MVNW_REPOURL) {[m
[32m+[m[32m  $MVNW_REPO_PATTERN = if ($USE_MVND) { "/org/apache/maven/" } else { "/maven/mvnd/" }[m
[32m+[m[32m  $distributionUrl = "$env:MVNW_REPOURL$MVNW_REPO_PATTERN$($distributionUrl -replace '^.*'+$MVNW_REPO_PATTERN,'')"[m
[32m+[m[32m}[m
[32m+[m[32m$distributionUrlName = $distributionUrl -replace '^.*/',''[m
[32m+[m[32m$distributionUrlNameMain = $distributionUrlName -replace '\.[^.]*$','' -replace '-bin$',''[m
[32m+[m[32m$MAVEN_HOME_PARENT = "$HOME/.m2/wrapper/dists/$distributionUrlNameMain"[m
[32m+[m[32mif ($env:MAVEN_USER_HOME) {[m
[32m+[m[32m  $MAVEN_HOME_PARENT = "$env:MAVEN_USER_HOME/wrapper/dists/$distributionUrlNameMain"[m
[32m+[m[32m}[m
[32m+[m[32m$MAVEN_HOME_NAME = ([System.Security.Cryptography.MD5]::Create().ComputeHash([byte[]][char[]]$distributionUrl) | ForEach-Object {$_.ToString("x2")}) -join ''[m
[32m+[m[32m$MAVEN_HOME = "$MAVEN_HOME_PARENT/$MAVEN_HOME_NAME"[m
[32m+[m
[32m+[m[32mif (Test-Path -Path "$MAVEN_HOME" -PathType Container) {[m
[32m+[m[32m  Write-Verbose "found existing MAVEN_HOME at $MAVEN_HOME"[m
[32m+[m[32m  Write-Output "MVN_CMD=$MAVEN_HOME/bin/$MVN_CMD"[m
[32m+[m[32m  exit $?[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mif (! $distributionUrlNameMain -or ($distributionUrlName -eq $distributionUrlNameMain)) {[m
[32m+[m[32m  Write-Error "distributionUrl is not valid, must end with *-bin.zip, but found $distributionUrl"[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m# prepare tmp dir[m
[32m+[m[32m$TMP_DOWNLOAD_DIR_HOLDER = New-TemporaryFile[m
[32m+[m[32m$TMP_DOWNLOAD_DIR = New-Item -Itemtype Directory -Path "$TMP_DOWNLOAD_DIR_HOLDER.dir"[m
[32m+[m[32m$TMP_DOWNLOAD_DIR_HOLDER.Delete() | Out-Null[m
[32m+[m[32mtrap {[m
[32m+[m[32m  if ($TMP_DOWNLOAD_DIR.Exists) {[m
[32m+[m[32m    try { Remove-Item $TMP_DOWNLOAD_DIR -Recurse -Force | Out-Null }[m
[32m+[m[32m    catch { Write-Warning "Cannot remove $TMP_DOWNLOAD_DIR" }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mNew-Item -Itemtype Directory -Path "$MAVEN_HOME_PARENT" -Force | Out-Null[m
[32m+[m
[32m+[m[32m# Download and Install Apache Maven[m
[32m+[m[32mWrite-Verbose "Couldn't find MAVEN_HOME, downloading and installing it ..."[m
[32m+[m[32mWrite-Verbose "Downloading from: $distributionUrl"[m
[32m+[m[32mWrite-Verbose "Downloading to: $TMP_DOWNLOAD_DIR/$distributionUrlName"[m
[32m+[m
[32m+[m[32m$webclient = New-Object System.Net.WebClient[m
[32m+[m[32mif ($env:MVNW_USERNAME -and $env:MVNW_PASSWORD) {[m
[32m+[m[32m  $webclient.Credentials = New-Object System.Net.NetworkCredential($env:MVNW_USERNAME, $env:MVNW_PASSWORD)[m
[32m+[m[32m}[m
[32m+[m[32m[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12[m
[32m+[m[32m$webclient.DownloadFile($distributionUrl, "$TMP_DOWNLOAD_DIR/$distributionUrlName") | Out-Null[m
[32m+[m
[32m+[m[32m# If specified, validate the SHA-256 sum of the Maven distribution zip file[m
[32m+[m[32m$distributionSha256Sum = (Get-Content -Raw "$scriptDir/.mvn/wrapper/maven-wrapper.properties" | ConvertFrom-StringData).distributionSha256Sum[m
[32m+[m[32mif ($distributionSha256Sum) {[m
[32m+[m[32m  if ($USE_MVND) {[m
[32m+[m[32m    Write-Error "Checksum validation is not supported for maven-mvnd. `nPlease disable validation by removing 'distributionSha256Sum' from your maven-wrapper.properties."[m
[32m+[m[32m  }[m
[32m+[m[32m  Import-Module $PSHOME\Modules\Microsoft.PowerShell.Utility -Function Get-FileHash[m
[32m+[m[32m  if ((Get-FileHash "$TMP_DOWNLOAD_DIR/$distributionUrlName" -Algorithm SHA256).Hash.ToLower() -ne $distributionSha256Sum) {[m
[32m+[m[32m    Write-Error "Error: Failed to validate Maven distribution SHA-256, your Maven distribution might be compromised. If you updated your Maven version, you need to update the specified distributionSha256Sum property."[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m# unzip and move[m
[32m+[m[32mExpand-Archive "$TMP_DOWNLOAD_DIR/$distributionUrlName" -DestinationPath "$TMP_DOWNLOAD_DIR" | Out-Null[m
[32m+[m[32mRename-Item -Path "$TMP_DOWNLOAD_DIR/$distributionUrlNameMain" -NewName $MAVEN_HOME_NAME | Out-Null[m
[32m+[m[32mtry {[m
[32m+[m[32m  Move-Item -Path "$TMP_DOWNLOAD_DIR/$MAVEN_HOME_NAME" -Destination $MAVEN_HOME_PARENT | Out-Null[m
[32m+[m[32m} catch {[m
[32m+[m[32m  if (! (Test-Path -Path "$MAVEN_HOME" -PathType Container)) {[m
[32m+[m[32m    Write-Error "fail to move MAVEN_HOME"[m
[32m+[m[32m  }[m
[32m+[m[32m} finally {[m
[32m+[m[32m  try { Remove-Item $TMP_DOWNLOAD_DIR -Recurse -Force | Out-Null }[m
[32m+[m[32m  catch { Write-Warning "Cannot remove $TMP_DOWNLOAD_DIR" }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mWrite-Output "MVN_CMD=$MAVEN_HOME/bin/$MVN_CMD"[m
[1mdiff --git a/LifeNotebook/pom.xml b/LifeNotebook/pom.xml[m
[1mnew file mode 100644[m
[1mindex 0000000..32d0126[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/pom.xml[m
[36m@@ -0,0 +1,140 @@[m
[32m+[m[32m<?xml version="1.0" encoding="UTF-8"?>[m
[32m+[m[32m<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"[m
[32m+[m	[32mxsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">[m
[32m+[m	[32m<modelVersion>4.0.0</modelVersion>[m
[32m+[m	[32m<parent>[m
[32m+[m		[32m<groupId>org.springframework.boot</groupId>[m
[32m+[m		[32m<artifactId>spring-boot-starter-parent</artifactId>[m
[32m+[m		[32m<version>3.4.1</version>[m
[32m+[m		[32m<relativePath/> <!-- lookup parent from repository -->[m
[32m+[m	[32m</parent>[m
[32m+[m	[32m<groupId>com.example</groupId>[m
[32m+[m	[32m<artifactId>LifeNotebook</artifactId>[m
[32m+[m	[32m<version>0.0.1-SNAPSHOT</version>[m
[32m+[m	[32m<packaging>war</packaging>[m
[32m+[m	[32m<name>LifeNotebook</name>[m
[32m+[m	[32m<description>Demo project for Spring Boot</description>[m
[32m+[m	[32m<url/>[m
[32m+[m	[32m<licenses>[m
[32m+[m		[32m<license/>[m
[32m+[m	[32m</licenses>[m
[32m+[m	[32m<developers>[m
[32m+[m		[32m<developer/>[m
[32m+[m	[32m</developers>[m
[32m+[m	[32m<scm>[m
[32m+[m		[32m<connection/>[m
[32m+[m		[32m<developerConnection/>[m
[32m+[m		[32m<tag/>[m
[32m+[m		[32m<url/>[m
[32m+[m	[32m</scm>[m
[32m+[m	[32m<properties>[m
[32m+[m		[32m<java.version>21</java.version>[m
[32m+[m	[32m</properties>[m
[32m+[m	[32m<dependencies>[m
[32m+[m[41m		[m
[32m+[m[41m		[m
[32m+[m[41m		[m
[32m+[m		[32m<dependency>[m
[32m+[m			[32m<groupId>org.springframework.boot</groupId>[m
[32m+[m			[32m<artifactId>spring-boot-starter-web</artifactId>[m
[32m+[m		[32m</dependency>[m
[32m+[m
[32m+[m		[32m<dependency>[m
[32m+[m			[32m<groupId>org.springframework.boot</groupId>[m
[32m+[m			[32m<artifactId>spring-boot-starter-tomcat</artifactId>[m
[32m+[m			[32m<scope>provided</scope>[m
[32m+[m		[32m</dependency>[m
[32m+[m		[32m<dependency>[m
[32m+[m			[32m<groupId>org.springframework.boot</groupId>[m
[32m+[m			[32m<artifactId>spring-boot-starter-test</artifactId>[m
[32m+[m			[32m<scope>test</scope>[m
[32m+[m		[32m</dependency>[m
[32m+[m		[32m<dependency>[m
[32m+[m			[32m<groupId>org.springframework.security</groupId>[m
[32m+[m			[32m<artifactId>spring-security-test</artifactId>[m
[32m+[m			[32m<scope>test</scope>[m
[32m+[m		[32m</dependency>[m
[32m+[m[41m		[m
[32m+[m
[32m+[m		[32m<!-- security -->[m
[32m+[m		[32m<dependency>[m
[32m+[m			[32m<groupId>org.springframework.boot</groupId>[m
[32m+[m			[32m<artifactId>spring-boot-starter-security</artifactId>[m
[32m+[m		[32m</dependency>[m
[32m+[m[41m		[m
[32m+[m[41m		[m
[32m+[m		[32m<dependency>[m
[32m+[m			[32m<groupId>org.springframework.security</groupId>[m
[32m+[m			[32m<artifactId>spring-security-web</artifactId>[m
[32m+[m		[32m</dependency>[m
[32m+[m		[32m<dependency>[m
[32m+[m			[32m<groupId>org.springframework.security</groupId>[m
[32m+[m			[32m<artifactId>spring-security-config</artifactId>[m
[32m+[m		[32m</dependency>[m
[32m+[m[41m		[m
[32m+[m		[32m<dependency>[m
[32m+[m		[32m    <groupId>org.thymeleaf.extras</groupId>[m
[32m+[m		[32m    <artifactId>thymeleaf-extras-springsecurity6</artifactId>[m
[32m+[m		[32m</dependency>[m
[32m+[m[41m		[m
[32m+[m[41m		[m
[32m+[m		[32m<dependency>[m
[32m+[m			[32m<groupId>org.springframework.boot</groupId>[m
[32m+[m			[32m<artifactId>spring-boot-starter-data-jpa</artifactId>[m
[32m+[m		[32m</dependency>[m
[32m+[m[41m		[m
[32m+[m		[32m<dependency>[m
[32m+[m			[32m<groupId>org.springframework.boot</groupId>[m
[32m+[m			[32m<artifactId>spring-boot-starter-validation</artifactId>[m
[32m+[m		[32m</dependency>[m
[32m+[m[41m		[m
[32m+[m		[32m<!-- 簡單的話可以使用 restful 全自動[m
[32m+[m		[32m<dependency>[m
[32m+[m			[32m<groupId>org.springframework.boot</groupId>[m
[32m+[m			[32m<artifactId>spring-boot-starter-data-rest</artifactId>[m
[32m+[m		[32m</dependency>[m
[32m+[m		[32m-->[m
[32m+[m[41m		[m
[32m+[m[41m		[m
[32m+[m		[32m<dependency>[m
[32m+[m			[32m<groupId>org.springframework.boot</groupId>[m
[32m+[m			[32m<artifactId>spring-boot-starter-data-jpa</artifactId>[m
[32m+[m		[32m</dependency>[m
[32m+[m[41m		[m
[32m+[m		[32m<dependency>[m
[32m+[m			[32m<groupId>mysql</groupId>[m
[32m+[m			[32m<artifactId>mysql-connector-java</artifactId>[m
[32m+[m			[32m<version>8.0.33</version>[m
[32m+[m			[32m<scope>runtime</scope>[m
[32m+[m		[32m</dependency>[m
[32m+[m[41m		[m
[32m+[m		[32m<dependency>[m[41m [m
[32m+[m			[32m<groupId>org.springframework.boot</groupId>[m[41m [m
[32m+[m			[32m<artifactId>spring-boot-starter-thymeleaf</artifactId>[m[41m [m
[32m+[m		[32m</dependency>[m
[32m+[m		[32m<dependency>[m[41m [m
[32m+[m			[32m<groupId>org.slf4j</groupId>[m[41m [m
[32m+[m			[32m<artifactId>slf4j-api</artifactId>[m[41m [m
[32m+[m		[32m</dependency>[m[41m [m
[32m+[m		[32m<dependency>[m[41m [m
[32m+[m			[32m<groupId>ch.qos.logback</groupId>[m[41m [m
[32m+[m			[32m<artifactId>logback-classic</artifactId>[m[41m [m
[32m+[m		[32m</dependency>[m
[32m+[m[41m		[m
[32m+[m		[32m<dependency>[m
[32m+[m			[32m<groupId>org.springframework.boot</groupId>[m
[32m+[m			[32m<artifactId>spring-boot-starter-aop</artifactId>[m
[32m+[m		[32m</dependency>[m
[32m+[m[41m		[m
[32m+[m	[32m</dependencies>[m
[32m+[m
[32m+[m	[32m<build>[m
[32m+[m		[32m<plugins>[m
[32m+[m			[32m<plugin>[m
[32m+[m				[32m<groupId>org.springframework.boot</groupId>[m
[32m+[m				[32m<artifactId>spring-boot-maven-plugin</artifactId>[m
[32m+[m			[32m</plugin>[m
[32m+[m		[32m</plugins>[m
[32m+[m	[32m</build>[m
[32m+[m
[32m+[m[32m</project>[m
[1mdiff --git a/LifeNotebook/src/main/java/com/example/demo/Controller/AccountController.java b/LifeNotebook/src/main/java/com/example/demo/Controller/AccountController.java[m
[1mnew file mode 100644[m
[1mindex 0000000..e85b4df[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/java/com/example/demo/Controller/AccountController.java[m
[36m@@ -0,0 +1,101 @@[m
[32m+[m[32mpackage com.example.demo.Controller;[m
[32m+[m
[32m+[m
[32m+[m[32mimport java.util.List;[m
[32m+[m
[32m+[m[32mimport org.springframework.beans.factory.annotation.Autowired;[m
[32m+[m[32mimport org.springframework.security.core.context.SecurityContextHolder;[m
[32m+[m[32mimport org.springframework.stereotype.Controller;[m
[32m+[m[32mimport org.springframework.ui.Model;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.GetMapping;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.ModelAttribute;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.PathVariable;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.PostMapping;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.RequestParam;[m
[32m+[m
[32m+[m[32mimport com.example.demo.entity.User;[m
[32m+[m[32mimport com.example.demo.service.UserService;[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m@Controller[m
[32m+[m[32mpublic class AccountController {[m
[32m+[m[41m	[m
[32m+[m	[32m@Autowired[m
[32m+[m	[32mprivate final UserService userService;[m
[32m+[m[41m	[m
[32m+[m	[32mpublic AccountController(UserService userService) {[m
[32m+[m		[32mthis.userService = userService;[m
[32m+[m	[32m}[m
[32m+[m[41m	[m
[32m+[m	[32m//User show info[m
[32m+[m[32m    @GetMapping("/change-password")[m
[32m+[m[32m    public String showInfoPage(Model model) {[m
[32m+[m[32m     String name = SecurityContextHolder.getContext().getAuthentication().getName();[m
[32m+[m[32m        User user = userService.findByUsername(name);[m
[32m+[m[32m        model.addAttribute("userinfo", user);[m
[32m+[m[32m     return "change-password";[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    //User update password[m
[32m+[m[32m    @PostMapping("/update-password")[m
[32m+[m[32m    public String UserChangePassword([m
[32m+[m[32m            @RequestParam("oldPassword") String oldPassword,[m
[32m+[m[32m            @RequestParam("newPassword") String newPassword,[m
[32m+[m[32m            Model model) {[m
[32m+[m[32m        // 從 SecurityContextHolder 中獲取當前使用者名稱[m
[32m+[m[32m        String username = SecurityContextHolder.getContext().getAuthentication().getName();[m
[32m+[m[32m        try {[m
[32m+[m[32m            boolean isUpdated = userService.userUpdatePassword(username, oldPassword, newPassword);[m
[32m+[m
[32m+[m[32m            if (!isUpdated) {[m
[32m+[m[32m                model.addAttribute("error", "舊有密碼不正確");[m
[32m+[m[32m                return "change-password";[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            model.addAttribute("message", "新密碼更換成功");[m
[32m+[m[32m            return "change-password";[m
[32m+[m[32m        } catch (Exception e) {[m
[32m+[m[32m            model.addAttribute("error", e.getMessage());[m
[32m+[m[32m            return "change-password";[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m
[32m+[m[41m    [m
[32m+[m[32m    @GetMapping("/system")[m
[32m+[m[32m    public String ShowUserInfoPage(Model model) {[m
[32m+[m[41m    [m	[32mList<User> users = userService.findAllUsers();[m
[32m+[m[32m        model.addAttribute("users", users);[m
[32m+[m[32m        model.addAttribute("dataCount", users.size());[m
[32m+[m[32m        return "system";[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[41m    [m
[32m+[m[32m    @GetMapping("/system/admin-change-password/{id}")[m
[32m+[m[32m    public String showEditUserForm(@PathVariable Long id, Model model) {[m
[32m+[m[32m        User user = userService.getOneUserById(id);[m
[32m+[m[32m        model.addAttribute("user", user);[m
[32m+[m[32m        return "admin-change-password";[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    @PostMapping("/system/admin-change-password/{id}")[m
[32m+[m[32m    public String adminChangePassword([m
[32m+[m[41m    [m		[32m@PathVariable("id") long id,[m
[32m+[m[41m    [m		[32m@ModelAttribute("user") User user,[m
[32m+[m[32m            Model model) {[m
[32m+[m[41m    [m		[32mSystem.out.println(user.getPassword());[m
[32m+[m[32m            userService.adminUpdatePassword(id, user);[m
[32m+[m[32m            model.addAttribute("message", "成功更換密碼");[m
[32m+[m[32m            return "admin-change-password";[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[41m [m
[32m+[m[32m    @GetMapping("/system/delete/{id}")[m
[32m+[m[32m    public String deleteItem(@PathVariable Long id) {[m
[32m+[m[32m        userService.deleteItemById(id);[m
[32m+[m[32m        return "redirect:/system";[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m}[m
[1mdiff --git a/LifeNotebook/src/main/java/com/example/demo/Controller/AccountingController.java b/LifeNotebook/src/main/java/com/example/demo/Controller/AccountingController.java[m
[1mnew file mode 100644[m
[1mindex 0000000..9a57551[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/java/com/example/demo/Controller/AccountingController.java[m
[36m@@ -0,0 +1,111 @@[m
[32m+[m[32mpackage com.example.demo.Controller;[m
[32m+[m
[32m+[m[32mimport java.time.LocalDate;[m
[32m+[m[32mimport java.util.List;[m
[32m+[m
[32m+[m[32mimport org.springframework.beans.factory.annotation.Autowired;[m
[32m+[m[32mimport org.springframework.format.annotation.DateTimeFormat;[m
[32m+[m[32mimport org.springframework.stereotype.Controller;[m
[32m+[m[32mimport org.springframework.ui.Model;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.GetMapping;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.ModelAttribute;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.PathVariable;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.PostMapping;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.RequestParam;[m
[32m+[m
[32m+[m[32mimport com.example.demo.model.Accounting;[m
[32m+[m[32mimport com.example.demo.service.AccountingService;[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m@Controller[m
[32m+[m[32mpublic class AccountingController {[m
[32m+[m[41m	[m
[32m+[m	[32m@Autowired[m
[32m+[m	[32mprivate final AccountingService accountingService;[m
[32m+[m
[32m+[m[41m	[m
[32m+[m	[32mpublic AccountingController(AccountingService accountingService) {[m
[32m+[m		[32mthis.accountingService = accountingService;[m
[32m+[m	[32m}[m
[32m+[m[41m	[m
[32m+[m	[32m@GetMapping("/accounting")[m
[32m+[m	[32mpublic String ShowAccountingPage(Model model) {[m
[32m+[m		[32m// 呼叫新的服務方法來取得最新50筆資料[m
[32m+[m	[32m    List<Accounting> items = accountingService.getLatestItems();[m
[32m+[m	[32m    model.addAttribute("Accounting", items);[m
[32m+[m	[32m    model.addAttribute("dataCount", items.size());[m
[32m+[m	[32m    return "accounting";[m
[32m+[m	[32m}[m
[32m+[m[41m	[m
[32m+[m[41m	[m
[32m+[m	[32m@GetMapping("/accounting/addData")[m
[32m+[m	[32mpublic String showAddData(Model model) {[m
[32m+[m		[32mAccounting item = new Accounting();[m
[32m+[m		[32mmodel.addAttribute("Accounting", item);[m
[32m+[m		[32mreturn "add-data-form";[m
[32m+[m	[32m}[m
[32m+[m[41m	[m
[32m+[m	[32m//新增項目[m
[32m+[m	[32m@PostMapping("/accounting/addData")[m
[32m+[m[32m    public String addData(@ModelAttribute("Accounting") Accounting accounting) {[m
[32m+[m[32m        accountingService.saveItem(accounting);[m
[32m+[m[32m        return "redirect:/accounting";[m
[32m+[m[32m    }[m
[32m+[m[41m	[m
[32m+[m	[32m//編輯項目[m
[32m+[m	[32m@GetMapping("/edit/{id}")[m
[32m+[m[32m    public String showEditForm(@PathVariable Long id, Model model) {[m
[32m+[m[32m        Accounting accounting = accountingService.getOneItemById(id);[m
[32m+[m[41m        [m
[32m+[m[32m//        LocalDate dateString = accounting.getDate(); // 返回 "2025/01/04"[m
[32m+[m[32m//        // 替換格式[m
[32m+[m[32m//        String formattedDate = dateString.toString().replace("/", "-");[m
[32m+[m[32m//        // 轉換為 LocalDate[m
[32m+[m[32m//        LocalDate localDate = LocalDate.parse(formattedDate, DateTimeFormatter.ofPattern("yyyy-MM-dd"));[m
[32m+[m[32m//        // 設定回 accounting[m
[32m+[m[32m//        accounting.setDate(localDate);[m
[32m+[m[32m//        System.out.println(accounting.getDate());[m
[32m+[m[41m        [m
[32m+[m[32m        model.addAttribute("tempAccounting", accounting);[m
[32m+[m[32m        return "edit-data-form";[m
[32m+[m[32m    }[m
[32m+[m[41m	[m
[32m+[m	[32m//更新項目[m
[32m+[m[32m    @PostMapping("/edit/{id}")[m
[32m+[m[32m    public String updateItem(@PathVariable Long id, @ModelAttribute("tempAccounting") Accounting accounting) {[m
[32m+[m[32m        accountingService.updateItem(id, accounting);[m
[32m+[m[32m        return "redirect:/accounting";[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    //刪除項目[m
[32m+[m[32m    @GetMapping("/delete/{id}")[m
[32m+[m[32m    public String deleteItem(@PathVariable Long id) {[m
[32m+[m[32m        accountingService.deleteItemById(id);[m
[32m+[m[32m        return "redirect:/accounting";[m
[32m+[m[32m    }[m
[32m+[m[41m	[m
[32m+[m[32m    // 顯示搜尋結果頁面[m
[32m+[m[32m    @GetMapping("/search")[m
[32m+[m[32m    public String showSearchPage([m
[32m+[m[32m            @RequestParam("startDate") @DateTimeFormat(pattern = "yyyy-MM-dd") LocalDate startDate,[m
[32m+[m[32m            @RequestParam("endDate") @DateTimeFormat(pattern = "yyyy-MM-dd") LocalDate endDate,[m
[32m+[m[32m            Model model) {[m
[32m+[m
[32m+[m[32m        List<Accounting> results = accountingService.getRecordsBetweenDates(startDate, endDate);[m
[32m+[m[32m        results = accountingService.getAllItem();[m
[32m+[m[32m        model.addAttribute("results", results);[m
[32m+[m[32m        model.addAttribute("dataCount", results.size());[m
[32m+[m[32m        model.addAttribute("startDate", startDate);[m
[32m+[m[32m        model.addAttribute("endDate", endDate);[m
[32m+[m[32m        return "search";[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[41m    [m
[32m+[m[41m    [m
[32m+[m[41m    [m
[32m+[m[41m    [m
[32m+[m
[32m+[m[32m}[m
[1mdiff --git a/LifeNotebook/src/main/java/com/example/demo/Controller/LoginController.java b/LifeNotebook/src/main/java/com/example/demo/Controller/LoginController.java[m
[1mnew file mode 100644[m
[1mindex 0000000..4af063d[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/java/com/example/demo/Controller/LoginController.java[m
[36m@@ -0,0 +1,114 @@[m
[32m+[m[32mpackage com.example.demo.Controller;[m
[32m+[m
[32m+[m[32mimport org.slf4j.*;[m
[32m+[m[32mimport org.springframework.beans.factory.annotation.Autowired;[m
[32m+[m[32mimport org.springframework.beans.propertyeditors.StringTrimmerEditor;[m
[32m+[m[32mimport org.springframework.security.web.csrf.CsrfToken;[m
[32m+[m[32mimport org.springframework.stereotype.Controller;[m
[32m+[m[32mimport org.springframework.ui.Model;[m
[32m+[m[32mimport org.springframework.validation.BindingResult;[m
[32m+[m[32mimport org.springframework.web.bind.WebDataBinder;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.GetMapping;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.InitBinder;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.ModelAttribute;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.PostMapping;[m
[32m+[m
[32m+[m[32mimport com.example.demo.dto.RegistrationDto;[m
[32m+[m[32mimport com.example.demo.entity.User;[m
[32m+[m[32mimport com.example.demo.service.UserService;[m
[32m+[m
[32m+[m[32mimport jakarta.annotation.PostConstruct;[m
[32m+[m[32mimport jakarta.servlet.http.HttpServletRequest;[m
[32m+[m[32mimport jakarta.validation.Valid;[m
[32m+[m
[32m+[m[32m@Controller[m
[32m+[m[32mpublic class LoginController {[m
[32m+[m[41m	[m
[32m+[m	[32m@Autowired[m
[32m+[m[32m    private UserService userService;[m
[32m+[m[41m	[m
[32m+[m	[32mprivate static final Logger logger = LoggerFactory.getLogger(LoginController.class);[m
[32m+[m[41m	[m
[32m+[m	[32m@GetMapping("/")[m
[32m+[m[32m    public String showWlecomePage() {[m
[32m+[m[32m        return "welcome";[m
[32m+[m[32m    }[m
[32m+[m[41m	[m
[32m+[m	[32m@GetMapping("/login")[m
[32m+[m	[32mpublic String loginPage(HttpServletRequest request, Model model) {[m
[32m+[m		[32mCsrfToken csrfToken = (CsrfToken) request.getAttribute("_csrf");[m
[32m+[m		[32mif (csrfToken !=null) {[m
[32m+[m			[32mmodel.addAttribute("_csrf",csrfToken);[m
[32m+[m		[32m}[m
[32m+[m		[32mreturn "login";[m
[32m+[m	[32m}[m
[32m+[m[41m	[m
[32m+[m[41m	[m
[32m+[m	[32m @GetMapping("/register-free-account")[m
[32m+[m	[32m public String showRegisterFreeAccountPage(Model model) {[m
[32m+[m	[32mmodel.addAttribute("registrationDto", new RegistrationDto());[m
[32m+[m	[32m     return "register-free-account";[m
[32m+[m	[32m }[m
[32m+[m[41m	[m
[32m+[m	[32m@GetMapping("/register-paid-account")[m
[32m+[m[32m    public String showRegisterPaidAccountPage(Model model) {[m
[32m+[m[41m    [m	[32mmodel.addAttribute("registrationDto", new RegistrationDto());[m
[32m+[m[32m        return "register-paid-account";[m
[32m+[m[32m    }[m
[32m+[m[41m	[m
[32m+[m[41m	[m
[32m+[m	[32m@InitBinder[m
[32m+[m	[32mpublic void initBinder(WebDataBinder dataBinder) {[m
[32m+[m[41m		[m
[32m+[m		[32mStringTrimmerEditor stringTrimmerEditor = new StringTrimmerEditor(true);[m
[32m+[m[41m		[m
[32m+[m		[32mdataBinder.registerCustomEditor(String.class, stringTrimmerEditor);[m
[32m+[m	[32m}[m[41m	[m
[32m+[m[41m	[m
[32m+[m	[32m@PostMapping("/register-free-account")[m
[32m+[m	[32mpublic String processRegistrationForm([m
[32m+[m			[32m@Valid @ModelAttribute("registrationDto") RegistrationDto registrationDto,[m
[32m+[m			[32mBindingResult theBindingResult, Model theModel) {[m
[32m+[m
[32m+[m		[32mString userName = registrationDto.getUsername();[m
[32m+[m		[32mlogger.info("Processing registration form for: " + userName);[m
[32m+[m[41m		[m
[32m+[m		[32m// form validation[m
[32m+[m		[32m if (theBindingResult.hasErrors()){[m
[32m+[m			[32m return "register-free-account";[m
[32m+[m		[32m }[m
[32m+[m[41m		 [m
[32m+[m		[32m // 檢查使用者名稱是否存在[m
[32m+[m	[32m    if (userService.isUsernameExists(userName)) {[m
[32m+[m	[32m        theModel.addAttribute("registrationError", "使用者已存在，請使用其他帳號。");[m
[32m+[m	[32m        return "register-free-account";[m
[32m+[m	[32m    }[m
[32m+[m
[32m+[m[32m        userService.registerUser(registrationDto);[m
[32m+[m
[32m+[m[32m        logger.info("Successfully created user: " + userName);[m
[32m+[m
[32m+[m[32m        return "redirect:/login";[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32m @GetMapping("/access-denied")[m
[32m+[m	[32m    public String showAccessDenied() {[m
[32m+[m
[32m+[m	[32m        return "access-denied";[m
[32m+[m	[32m    }[m
[32m+[m
[32m+[m[41m	[m
[32m+[m	[32m@PostConstruct[m
[32m+[m[32m    public void init() {[m
[32m+[m[32m        if (userService.findByUsername("admin99") == null) {[m
[32m+[m[32m            User admin = new User();[m
[32m+[m[32m            admin.setUsername("admin99");[m
[32m+[m[32m            admin.setPassword("admin99");[m
[32m+[m[32m            admin.setEmail("admin@demo.com");[m
[32m+[m[32m            admin.setRole("ADMIN");[m
[32m+[m[32m            userService.saveUser(admin);[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[41m	[m
[32m+[m
[32m+[m[32m}[m
[1mdiff --git a/LifeNotebook/src/main/java/com/example/demo/LifeNotebookApplication.java b/LifeNotebook/src/main/java/com/example/demo/LifeNotebookApplication.java[m
[1mnew file mode 100644[m
[1mindex 0000000..faf067f[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/java/com/example/demo/LifeNotebookApplication.java[m
[36m@@ -0,0 +1,13 @@[m
[32m+[m[32mpackage com.example.demo;[m
[32m+[m
[32m+[m[32mimport org.springframework.boot.SpringApplication;[m
[32m+[m[32mimport org.springframework.boot.autoconfigure.SpringBootApplication;[m
[32m+[m
[32m+[m[32m@SpringBootApplication[m
[32m+[m[32mpublic class LifeNotebookApplication {[m
[32m+[m
[32m+[m	[32mpublic static void main(String[] args) {[m
[32m+[m		[32mSpringApplication.run(LifeNotebookApplication.class, args);[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m[32m}[m
[1mdiff --git a/LifeNotebook/src/main/java/com/example/demo/ServletInitializer.java b/LifeNotebook/src/main/java/com/example/demo/ServletInitializer.java[m
[1mnew file mode 100644[m
[1mindex 0000000..965f040[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/java/com/example/demo/ServletInitializer.java[m
[36m@@ -0,0 +1,13 @@[m
[32m+[m[32mpackage com.example.demo;[m
[32m+[m
[32m+[m[32mimport org.springframework.boot.builder.SpringApplicationBuilder;[m
[32m+[m[32mimport org.springframework.boot.web.servlet.support.SpringBootServletInitializer;[m
[32m+[m
[32m+[m[32mpublic class ServletInitializer extends SpringBootServletInitializer {[m
[32m+[m
[32m+[m	[32m@Override[m
[32m+[m	[32mprotected SpringApplicationBuilder configure(SpringApplicationBuilder application) {[m
[32m+[m		[32mreturn application.sources(LifeNotebookApplication.class);[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m[32m}[m
[1mdiff --git a/LifeNotebook/src/main/java/com/example/demo/config/SecurityConfig.java b/LifeNotebook/src/main/java/com/example/demo/config/SecurityConfig.java[m
[1mnew file mode 100644[m
[1mindex 0000000..82da92b[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/java/com/example/demo/config/SecurityConfig.java[m
[36m@@ -0,0 +1,56 @@[m
[32m+[m[32mpackage com.example.demo.config;[m
[32m+[m
[32m+[m[32mimport com.example.demo.service.CustomUserDetailsService;[m
[32m+[m
[32m+[m[32mimport org.springframework.beans.factory.annotation.Autowired;[m
[32m+[m[32mimport org.springframework.context.annotation.Bean;[m
[32m+[m[32mimport org.springframework.context.annotation.Configuration;[m
[32m+[m[32mimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;[m
[32m+[m
[32m+[m[32mimport org.springframework.security.config.annotation.web.builders.HttpSecurity;[m
[32m+[m[32mimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;[m
[32m+[m[32mimport org.springframework.security.crypto.password.PasswordEncoder;[m
[32m+[m[32mimport org.springframework.security.web.SecurityFilterChain;[m
[32m+[m
[32m+[m[32m@Configuration[m
[32m+[m[32mpublic class SecurityConfig {[m
[32m+[m
[32m+[m[32m    @Autowired[m
[32m+[m[32m    private CustomUserDetailsService customUserDetailsService;[m
[32m+[m[41m    [m
[32m+[m
[32m+[m[32m    @Bean[m
[32m+[m[32m    public PasswordEncoder passwordEncoder() {[m
[32m+[m[32m        return new BCryptPasswordEncoder();[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    @Bean[m
[32m+[m[32m    public DaoAuthenticationProvider authenticationProvider() {[m
[32m+[m[32m        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();[m
[32m+[m[32m        authProvider.setUserDetailsService(customUserDetailsService);[m
[32m+[m[32m        authProvider.setPasswordEncoder(passwordEncoder());[m
[32m+[m[32m        return authProvider;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    @Bean[m
[32m+[m[32m    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {[m
[32m+[m[32m        http.csrf(csrf -> csrf.disable())[m
[32m+[m[32m            .authorizeHttpRequests(auth -> auth[m
[32m+[m[32m                .requestMatchers("/","/register-free-account", "/login", "/resources/**").permitAll()[m
[32m+[m[32m                .requestMatchers("/system/**").hasRole("ADMIN")[m
[32m+[m[32m                .anyRequest()[m
[32m+[m[32m                .authenticated()[m
[32m+[m[32m            )[m
[32m+[m[32m            .formLogin(form -> form[m
[32m+[m[32m                .loginPage("/login")[m
[32m+[m[32m                .failureUrl("/login?error=true")[m
[32m+[m[32m                .defaultSuccessUrl("/accounting", true)[m
[32m+[m[32m                .permitAll()[m
[32m+[m[32m            )[m
[32m+[m[32m            .logout(logout -> logout.permitAll())[m
[32m+[m[32m            .exceptionHandling(configurer ->[m
[32m+[m[32m            configurer.accessDeniedPage("/access-denied"));[m
[32m+[m
[32m+[m[32m        return http.build();[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[1mdiff --git a/LifeNotebook/src/main/java/com/example/demo/dto/RegistrationDto.java b/LifeNotebook/src/main/java/com/example/demo/dto/RegistrationDto.java[m
[1mnew file mode 100644[m
[1mindex 0000000..39d5617[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/java/com/example/demo/dto/RegistrationDto.java[m
[36m@@ -0,0 +1,44 @@[m
[32m+[m[32mpackage com.example.demo.dto;[m
[32m+[m
[32m+[m[32mimport jakarta.validation.constraints.Email;[m
[32m+[m[32mimport jakarta.validation.constraints.NotNull;[m
[32m+[m[32mimport jakarta.validation.constraints.Pattern;[m
[32m+[m[32mimport jakarta.validation.constraints.Size;[m
[32m+[m
[32m+[m[32mpublic class RegistrationDto {[m
[32m+[m[41m	[m
[32m+[m	[32m@NotNull(message = "is required")[m
[32m+[m	[32m@Size(min = 3, message = "請輸入至少3位數的英文或數字")[m
[32m+[m	[32m@NotNull (message = "is required")[m
[32m+[m[32m    private String username;[m
[32m+[m[41m	[m
[32m+[m	[32m@NotNull(message = "is required")[m
[32m+[m	[32m@Size(min = 1, message = "is required")[m
[32m+[m	[32m@Pattern (regexp = "^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d).{8,}$", message = "請輸入至少8位數的密碼，請包含至少一個大寫小寫與一個數字。")[m
[32m+[m[32m    private String password;[m
[32m+[m[41m	[m
[32m+[m	[32m@NotNull(message = "is required")[m
[32m+[m	[32m@Email[m
[32m+[m[32m    private String email;[m
[32m+[m[41m    [m
[32m+[m	[32mpublic String getUsername() {[m
[32m+[m		[32mreturn username;[m
[32m+[m	[32m}[m
[32m+[m	[32mpublic void setUsername(String username) {[m
[32m+[m		[32mthis.username = username;[m
[32m+[m	[32m}[m
[32m+[m	[32mpublic String getPassword() {[m
[32m+[m		[32mreturn password;[m
[32m+[m	[32m}[m
[32m+[m	[32mpublic void setPassword(String password) {[m
[32m+[m		[32mthis.password = password;[m
[32m+[m	[32m}[m
[32m+[m	[32mpublic String getEmail() {[m
[32m+[m		[32mreturn email;[m
[32m+[m	[32m}[m
[32m+[m	[32mpublic void setEmail(String email) {[m
[32m+[m		[32mthis.email = email;[m
[32m+[m	[32m}[m
[32m+[m[41m    [m
[32m+[m[41m    [m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/LifeNotebook/src/main/java/com/example/demo/entity/User.java b/LifeNotebook/src/main/java/com/example/demo/entity/User.java[m
[1mnew file mode 100644[m
[1mindex 0000000..9a9e01d[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/java/com/example/demo/entity/User.java[m
[36m@@ -0,0 +1,88 @@[m
[32m+[m[32mpackage com.example.demo.entity;[m
[32m+[m
[32m+[m[32mimport jakarta.persistence.*;[m
[32m+[m
[32m+[m[32m@Entity[m
[32m+[m[32m@Table(name = "user")[m
[32m+[m[32mpublic class User {[m
[32m+[m[41m	[m
[32m+[m	[32m@Id[m
[32m+[m	[32m@GeneratedValue (strategy = GenerationType.IDENTITY)[m
[32m+[m	[32m@Column(name = "id")[m
[32m+[m	[32mprivate long id;[m
[32m+[m[41m	[m
[32m+[m	[32m@Column(name = "username", unique = true, nullable = false)[m
[32m+[m	[32mprivate String username;[m
[32m+[m[41m	[m
[32m+[m	[32m@Column(name = "password", nullable = false)[m
[32m+[m	[32mprivate String password;[m
[32m+[m[41m	[m
[32m+[m	[32m@Column(name = "email")[m
[32m+[m	[32mprivate String email;[m
[32m+[m[41m	[m
[32m+[m	[32m@Column(name = "role", nullable = false)[m
[32m+[m	[32mprivate String role;[m
[32m+[m[41m	[m
[32m+[m	[32m//constructors[m
[32m+[m	[32mpublic User() {[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic User(long id, String username, String password, String email, String role) {[m
[32m+[m		[32msuper();[m
[32m+[m		[32mthis.id = id;[m
[32m+[m		[32mthis.username = username;[m
[32m+[m		[32mthis.password = password;[m
[32m+[m		[32mthis.email = email;[m
[32m+[m		[32mthis.role = role;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic long getId() {[m
[32m+[m		[32mreturn id;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic void setId(long id) {[m
[32m+[m		[32mthis.id = id;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic String getUsername() {[m
[32m+[m		[32mreturn username;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic void setUsername(String username) {[m
[32m+[m		[32mthis.username = username;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic String getPassword() {[m
[32m+[m		[32mreturn password;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic void setPassword(String password) {[m
[32m+[m		[32mthis.password = password;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic String getEmail() {[m
[32m+[m		[32mreturn email;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic void setEmail(String email) {[m
[32m+[m		[32mthis.email = email;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic String getRole() {[m
[32m+[m		[32mreturn role;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic void setRole(String role) {[m
[32m+[m		[32mthis.role = role;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32m@Override[m
[32m+[m	[32mpublic String toString() {[m
[32m+[m		[32mreturn "User [id=" + id + ", username=" + username + ", password=" + password + ", email=" + email + ", role="[m
[32m+[m				[32m+ role + "]";[m
[32m+[m	[32m}[m
[32m+[m[41m		[m
[32m+[m[32m}[m[41m	[m
[32m+[m[41m	[m
[32m+[m[41m	[m
[32m+[m[41m	[m
[1mdiff --git a/LifeNotebook/src/main/java/com/example/demo/model/Accounting.java b/LifeNotebook/src/main/java/com/example/demo/model/Accounting.java[m
[1mnew file mode 100644[m
[1mindex 0000000..998fe66[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/java/com/example/demo/model/Accounting.java[m
[36m@@ -0,0 +1,126 @@[m
[32m+[m[32mpackage com.example.demo.model;[m
[32m+[m
[32m+[m[32mimport java.time.LocalDate;[m
[32m+[m
[32m+[m[32mimport jakarta.persistence.*;[m
[32m+[m
[32m+[m[32m@Entity[m
[32m+[m[32m@Table(name = "accounting")[m
[32m+[m[32mpublic class Accounting {[m
[32m+[m[41m	[m
[32m+[m	[32m@Id[m
[32m+[m	[32m@GeneratedValue(strategy = GenerationType.IDENTITY)[m
[32m+[m	[32m@Column(name = "id")[m
[32m+[m	[32mprivate long id;[m
[32m+[m	[32m// 對應 DATE[m
[32m+[m	[32m@Column(name = "date")[m
[32m+[m	[32m@Temporal(TemporalType.DATE)[m
[32m+[m	[32mprivate LocalDate date;[m
[32m+[m[41m	[m
[32m+[m	[32m@Column(name = "category")[m
[32m+[m	[32mprivate String category;[m
[32m+[m[41m	[m
[32m+[m	[32m@Column(name = "balance")[m
[32m+[m	[32mprivate String balance;[m
[32m+[m[41m	[m
[32m+[m	[32m@Column(name = "name")[m
[32m+[m	[32mprivate String name;[m
[32m+[m[41m	[m
[32m+[m	[32m@Column(name = "amount")[m
[32m+[m	[32mprivate Double amount;[m
[32m+[m[41m	[m
[32m+[m	[32m@Column(name = "note")[m
[32m+[m	[32mprivate String note;[m
[32m+[m[41m	[m
[32m+[m	[32m@Column(name = "userId")[m
[32m+[m	[32mprivate long userId;[m
[32m+[m[41m	[m
[32m+[m	[32mpublic Accounting() {[m
[32m+[m[41m		[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic Accounting(long id, LocalDate date, String category, String balance, String name, Double amount, String note, long userId) {[m
[32m+[m		[32msuper();[m
[32m+[m		[32mthis.id = id;[m
[32m+[m		[32mthis.date = date;[m
[32m+[m		[32mthis.category = category;[m
[32m+[m		[32mthis.balance = balance;[m
[32m+[m		[32mthis.name = name;[m
[32m+[m		[32mthis.amount = amount;[m
[32m+[m		[32mthis.note = note;[m
[32m+[m		[32mthis.userId = userId;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic long getId() {[m
[32m+[m		[32mreturn id;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic void setId(long id) {[m
[32m+[m		[32mthis.id = id;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic LocalDate getDate() {[m
[32m+[m		[32mreturn date;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic void setDate(LocalDate date) {[m
[32m+[m		[32mthis.date = date;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic String getCategory() {[m
[32m+[m		[32mreturn category;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic void setCategory(String category) {[m
[32m+[m		[32mthis.category = category;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic String getBalance() {[m
[32m+[m		[32mreturn balance;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic void setBalance(String balance) {[m
[32m+[m		[32mthis.balance = balance;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic String getName() {[m
[32m+[m		[32mreturn name;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic void setName(String name) {[m
[32m+[m		[32mthis.name = name;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic Double getAmount() {[m
[32m+[m		[32mreturn amount;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic void setAmount(Double amount) {[m
[32m+[m		[32mthis.amount = amount;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic String getNote() {[m
[32m+[m		[32mreturn note;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic void setNote(String note) {[m
[32m+[m		[32mthis.note = note;[m
[32m+[m	[32m}[m
[32m+[m[41m	[m
[32m+[m	[32mpublic long getUserId() {[m
[32m+[m		[32mreturn userId;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m	[32mpublic void setUserId(long userId) {[m
[32m+[m		[32mthis.userId = userId;[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m[41m	[m
[32m+[m	[32m@Override[m
[32m+[m	[32mpublic String toString() {[m
[32m+[m		[32mreturn "Accounting [id=" + id + ", date=" + date + ", category=" + category + ", balance=" + balance + ", name="[m
[32m+[m				[32m+ name + ", amount=" + amount + ", note=" + note + ", userId=" + userId + "]";[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m
[32m+[m[32m}[m
[1mdiff --git a/LifeNotebook/src/main/java/com/example/demo/repository/AccountingRepository.java b/LifeNotebook/src/main/java/com/example/demo/repository/AccountingRepository.java[m
[1mnew file mode 100644[m
[1mindex 0000000..9ce9f1f[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/java/com/example/demo/repository/AccountingRepository.java[m
[36m@@ -0,0 +1,24 @@[m
[32m+[m[32mpackage com.example.demo.repository;[m
[32m+[m
[32m+[m[32mimport java.time.LocalDate;[m
[32m+[m[32mimport java.util.List;[m
[32m+[m
[32m+[m[32mimport org.springframework.data.domain.Page;[m
[32m+[m[32mimport org.springframework.data.domain.PageRequest;[m
[32m+[m[32mimport org.springframework.data.jpa.repository.JpaRepository;[m
[32m+[m[32mimport org.springframework.data.jpa.repository.Query;[m
[32m+[m[32mimport org.springframework.data.repository.query.Param;[m
[32m+[m
[32m+[m[32mimport com.example.demo.model.Accounting;[m
[32m+[m
[32m+[m[32mpublic interface AccountingRepository extends JpaRepository<Accounting, Long>{[m
[32m+[m[41m	[m
[32m+[m[41m	[m
[32m+[m	[32mList<Accounting> findByUserId(long userId);[m
[32m+[m	[32mPage<Accounting> findByUserId(long userId, PageRequest pageRequest);[m
[32m+[m[32m    List<Accounting> findByDateBetween(LocalDate startDate, LocalDate endDate);[m
[32m+[m[41m    [m
[32m+[m[32m    // 設定分頁查詢，從最新的資料開始取 50 筆[m
[32m+[m[32m    @Query(value = "SELECT * FROM accounting WHERE user_id=:userId ORDER BY date DESC LIMIT 50;", nativeQuery = true)[m
[32m+[m[32m    List<Accounting> findLatestRecord(@Param("userId") Long userId);[m
[32m+[m[32m}[m
[1mdiff --git a/LifeNotebook/src/main/java/com/example/demo/repository/UserRepository.java b/LifeNotebook/src/main/java/com/example/demo/repository/UserRepository.java[m
[1mnew file mode 100644[m
[1mindex 0000000..e343b8e[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/java/com/example/demo/repository/UserRepository.java[m
[36m@@ -0,0 +1,14 @@[m
[32m+[m[32mpackage com.example.demo.repository;[m
[32m+[m
[32m+[m[32mimport com.example.demo.entity.User;[m
[32m+[m
[32m+[m[32mimport org.springframework.data.jpa.repository.JpaRepository;[m
[32m+[m
[32m+[m[32mpublic interface UserRepository extends JpaRepository<User, Long> {[m
[32m+[m[41m    [m
[32m+[m[41m	[m
[32m+[m	[32mUser findByUsername(String username);[m
[32m+[m
[32m+[m[41m    [m
[32m+[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/LifeNotebook/src/main/java/com/example/demo/service/AccountingService.java b/LifeNotebook/src/main/java/com/example/demo/service/AccountingService.java[m
[1mnew file mode 100644[m
[1mindex 0000000..e0a9df1[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/java/com/example/demo/service/AccountingService.java[m
[36m@@ -0,0 +1,75 @@[m
[32m+[m[32mpackage com.example.demo.service;[m
[32m+[m
[32m+[m
[32m+[m[32mimport java.time.LocalDate;[m
[32m+[m[32mimport java.util.List;[m
[32m+[m
[32m+[m
[32m+[m[32mimport org.springframework.security.core.context.SecurityContextHolder;[m
[32m+[m[32mimport org.springframework.stereotype.Service;[m
[32m+[m
[32m+[m[32mimport com.example.demo.entity.User;[m
[32m+[m[32mimport com.example.demo.model.Accounting;[m
[32m+[m[32mimport com.example.demo.repository.AccountingRepository;[m
[32m+[m
[32m+[m[32m@Service[m
[32m+[m[32mpublic class AccountingService {[m
[32m+[m[41m	[m
[32m+[m
[32m+[m	[32mprivate final AccountingRepository accountingRepository;[m
[32m+[m	[32mprivate final UserService userService;[m
[32m+[m[41m	[m
[32m+[m	[32mpublic AccountingService(AccountingRepository accountingRepository, UserService userService) {[m
[32m+[m		[32mthis.accountingRepository = accountingRepository;[m
[32m+[m		[32mthis.userService = userService;[m
[32m+[m	[32m}[m
[32m+[m[41m	[m
[32m+[m	[32mprivate Long getCurrentUserId() {[m
[32m+[m[32m        String username = SecurityContextHolder.getContext().getAuthentication().getName();[m
[32m+[m[32m        User user = userService.findByUsername(username);[m
[32m+[m[32m        return user.getId();[m
[32m+[m[32m    }[m
[32m+[m[41m	[m
[32m+[m	[32mpublic List<Accounting> getAllItem(){[m
[32m+[m		[32mLong userId = getCurrentUserId();[m
[32m+[m		[32mreturn accountingRepository.findByUserId(userId);[m
[32m+[m	[32m}[m
[32m+[m[41m	[m
[32m+[m	[32mpublic Accounting getOneItemById(Long id){[m
[32m+[m		[32mreturn accountingRepository.findById(id).orElse(null);[m
[32m+[m	[32m}[m
[32m+[m[41m	[m
[32m+[m	[32mpublic void saveItem(Accounting item) {[m
[32m+[m		[32mLong userId = getCurrentUserId();[m
[32m+[m	[32m    item.setUserId(userId);[m
[32m+[m		[32maccountingRepository.save(item);[m
[32m+[m	[32m}[m
[32m+[m[41m	[m
[32m+[m	[32mpublic void updateItem(Long id, Accounting item) {[m
[32m+[m		[32mAccounting existItem = getOneItemById(id);[m
[32m+[m		[32mif(existItem != null) {[m
[32m+[m			[32mexistItem.setAmount(item.getAmount());[m
[32m+[m			[32mexistItem.setBalance(item.getBalance());[m
[32m+[m			[32mexistItem.setCategory(item.getCategory());[m
[32m+[m			[32mexistItem.setDate(item.getDate());[m
[32m+[m			[32mexistItem.setName(item.getName());[m
[32m+[m			[32mexistItem.setNote(item.getNote());[m
[32m+[m			[32maccountingRepository.save(existItem);[m
[32m+[m		[32m}[m
[32m+[m	[32m}[m
[32m+[m[41m	[m
[32m+[m	[32mpublic void deleteItemById(Long id) {[m
[32m+[m		[32maccountingRepository.deleteById(id);[m
[32m+[m	[32m}[m
[32m+[m[41m	[m
[32m+[m	[32mpublic List<Accounting> getRecordsBetweenDates(LocalDate startDate, LocalDate endDate) {[m
[32m+[m[32m        return accountingRepository.findByDateBetween(startDate, endDate);[m
[32m+[m[32m    }[m
[32m+[m[41m	[m
[32m+[m	[32mpublic List<Accounting> getLatestItems() {[m
[32m+[m		[32mLong userId = getCurrentUserId();[m
[32m+[m	[32m    List<Accounting> user = accountingRepository.findLatestRecord(userId);[m
[32m+[m	[32m    return user;[m
[32m+[m	[32m}[m
[32m+[m[41m	[m
[32m+[m[32m}[m
[1mdiff --git a/LifeNotebook/src/main/java/com/example/demo/service/CustomUserDetailsService.java b/LifeNotebook/src/main/java/com/example/demo/service/CustomUserDetailsService.java[m
[1mnew file mode 100644[m
[1mindex 0000000..f946af8[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/java/com/example/demo/service/CustomUserDetailsService.java[m
[36m@@ -0,0 +1,36 @@[m
[32m+[m[32mpackage com.example.demo.service;[m
[32m+[m
[32m+[m[32mimport com.example.demo.entity.User;[m
[32m+[m[32mimport com.example.demo.repository.UserRepository;[m
[32m+[m
[32m+[m[32mimport org.springframework.beans.factory.annotation.Autowired;[m
[32m+[m[32mimport org.springframework.security.core.userdetails.UserDetails;[m
[32m+[m[32mimport org.springframework.security.core.userdetails.UserDetailsService;[m
[32m+[m[32mimport org.springframework.security.core.userdetails.UsernameNotFoundException;[m
[32m+[m[32mimport org.springframework.stereotype.Service;[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m@Service[m
[32m+[m[32mpublic class CustomUserDetailsService implements UserDetailsService {[m
[32m+[m
[32m+[m[32m    @Autowired[m
[32m+[m[32m    private UserRepository userRepository;[m
[32m+[m
[32m+[m[41m    [m
[32m+[m[32m    @Override[m
[32m+[m[32m    public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException {[m
[32m+[m[32m        User user = userRepository.findByUsername(userName);[m
[32m+[m
[32m+[m[32m        if (user == null) {[m
[32m+[m[32m            throw new UsernameNotFoundException("Invalid username or password.");[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        return org.springframework.security.core.userdetails.User.builder()[m
[32m+[m[32m                .username(user.getUsername())[m
[32m+[m[32m                .password(user.getPassword())[m
[32m+[m[32m                .roles(user.getRole())[m
[32m+[m[32m                .build();[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m}[m
[1mdiff --git a/LifeNotebook/src/main/java/com/example/demo/service/UserService.java b/LifeNotebook/src/main/java/com/example/demo/service/UserService.java[m
[1mnew file mode 100644[m
[1mindex 0000000..dbe3b16[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/java/com/example/demo/service/UserService.java[m
[36m@@ -0,0 +1,97 @@[m
[32m+[m[32mpackage com.example.demo.service;[m
[32m+[m
[32m+[m[32mimport com.example.demo.dto.RegistrationDto;[m
[32m+[m[32mimport com.example.demo.entity.User;[m
[32m+[m[32mimport com.example.demo.repository.UserRepository;[m
[32m+[m
[32m+[m[32mimport java.util.List;[m
[32m+[m
[32m+[m[32mimport org.springframework.beans.factory.annotation.Autowired;[m
[32m+[m[32mimport org.springframework.security.core.userdetails.UsernameNotFoundException;[m
[32m+[m[32mimport org.springframework.security.crypto.password.PasswordEncoder;[m
[32m+[m[32mimport org.springframework.stereotype.Service;[m
[32m+[m
[32m+[m[32m@Service[m
[32m+[m[32mpublic class UserService {[m
[32m+[m
[32m+[m[32m    @Autowired[m
[32m+[m[32m    private UserRepository userRepository;[m
[32m+[m
[32m+[m[32m    @Autowired[m
[32m+[m[32m    private PasswordEncoder passwordEncoder;[m
[32m+[m[41m    [m
[32m+[m[32m    public void saveUser(User user) {[m
[32m+[m[32m        // 編碼密碼[m
[32m+[m[32m        String encodedPassword = passwordEncoder.encode(user.getPassword());[m
[32m+[m[32m        user.setPassword(encodedPassword);[m
[32m+[m[32m        // 保存用戶[m
[32m+[m[32m        userRepository.save(user);[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    public boolean isUsernameExists(String username) {[m
[32m+[m[32m        return userRepository.findByUsername(username) != null;[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    public String registerUser(RegistrationDto registrationDto) {[m
[32m+[m[41m    [m	[32mif (isUsernameExists(registrationDto.getUsername())) {[m
[32m+[m[32m            return "Username already exists.";[m
[32m+[m[32m        }[m
[32m+[m[41m    	[m
[32m+[m[32m        User newUser = new User();[m
[32m+[m[32m        newUser.setUsername(registrationDto.getUsername());[m
[32m+[m[32m        newUser.setPassword(passwordEncoder.encode(registrationDto.getPassword()));[m
[32m+[m[32m        newUser.setEmail(registrationDto.getEmail());[m
[32m+[m[32m        newUser.setRole("USER"); // 默認角色設為 USER[m
[32m+[m[32m        userRepository.save(newUser);[m
[32m+[m[32m        return null; // 註冊成功[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    public User findByUsername(String username) {[m
[32m+[m[41m    [m	[32mreturn userRepository.findByUsername(username);[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m
[32m+[m[32m    public List<User> findAllUsers() {[m
[32m+[m[32m        return userRepository.findAll();[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    // 一般使用者更新密碼[m
[32m+[m[32m    public boolean userUpdatePassword(String username, String oldPassword, String newPassword) {[m
[32m+[m[41m    [m	[32mUser user = userRepository.findByUsername(username);[m
[32m+[m[32m        // 驗證舊密碼[m
[32m+[m[32m        if (!passwordEncoder.matches(oldPassword, user.getPassword())) {[m
[32m+[m[32m            return false; // 密碼不正確[m
[32m+[m[32m        }[m
[32m+[m[32m        // 更新為新密碼[m
[32m+[m[32m        user.setPassword(passwordEncoder.encode(newPassword));[m
[32m+[m[32m        userRepository.save(user);[m
[32m+[m[32m        return true;[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[41m    [m
[32m+[m[32m    public User getOneUserById(Long id){[m
[32m+[m		[32mreturn userRepository.findById(id).orElse(null);[m
[32m+[m	[32m}[m
[32m+[m[41m    [m
[32m+[m[32m    // 管理員更新密碼[m
[32m+[m[32m    public boolean adminUpdatePassword(long id, User theuser) {[m
[32m+[m[32m        User user = userRepository.findById(id).orElse(null);[m
[32m+[m[32m        if (user == null) {[m
[32m+[m[32m            throw new UsernameNotFoundException("User not found.");[m
[32m+[m[32m        }[m
[32m+[m[32m        user.setEmail(theuser.getEmail());[m
[32m+[m[32m        user.setRole(theuser.getRole());[m
[32m+[m[32m        user.setPassword(passwordEncoder.encode(theuser.getPassword()));[m
[32m+[m[32m        userRepository.save(user);[m
[32m+[m[32m        return true;[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    public void deleteItemById(Long id) {[m
[32m+[m		[32muserRepository.deleteById(id);[m
[32m+[m	[32m}[m
[32m+[m[41m    [m
[32m+[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m}[m
[1mdiff --git a/LifeNotebook/src/main/resources/application.properties b/LifeNotebook/src/main/resources/application.properties[m
[1mnew file mode 100644[m
[1mindex 0000000..efb4669[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/resources/application.properties[m
[36m@@ -0,0 +1,22 @@[m
[32m+[m[32mspring.application.name=LifeNotebook[m
[32m+[m
[32m+[m[32mserver.port=8899[m
[32m+[m
[32m+[m[32mlogging.level.org.springframework.security=DEBUG[m
[32m+[m
[32m+[m[32mspring.datasource.url=jdbc:mysql://localhost:5588/database_name[m
[32m+[m[32mspring.datasource.username=root[m
[32m+[m[32mspring.datasource.password=root[m
[32m+[m[32mspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver[m
[32m+[m[32mspring.jpa.hibernate.ddl-auto=update[m
[32m+[m[32mspring.jpa.show-sql=true[m
[32m+[m[32mspring.jpa.database-platform=org.hibernate.dialect.MySQLDialect[m
[32m+[m
[32m+[m
[32m+[m[32m# logging configs for SQL statments[m
[32m+[m[32mlogging.level.org.hibernate.SQL=debug[m
[32m+[m[32mlogging.level.org.hibernate.orm.jdbc.bind=trace[m
[32m+[m
[32m+[m[32m# spring data rest properties[m
[32m+[m[32m# spring.data.rest.enabled=false[m
[32m+[m[32m#spring.data.rest.base-path=/rest-api[m[41m [m
\ No newline at end of file[m
[1mdiff --git a/LifeNotebook/src/main/resources/templates/access-denied.html b/LifeNotebook/src/main/resources/templates/access-denied.html[m
[1mnew file mode 100644[m
[1mindex 0000000..dfd7c84[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/resources/templates/access-denied.html[m
[36m@@ -0,0 +1,14 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html lang="en" xmlns:th="http://www.thymeleaf.org">[m
[32m+[m[32m<head>[m
[32m+[m[32m    <meta charset="UTF-8">[m
[32m+[m[32m    <title>Access Denied</title>[m
[32m+[m[32m</head>[m
[32m+[m[32m<body>[m
[32m+[m
[32m+[m[32m<h2> 禁止進入 - 你的權限不足，無法進入此頁面或使用此功能</h2>[m
[32m+[m
[32m+[m[32m<hr>[m
[32m+[m
[32m+[m[32m</body>[m
[32m+[m[32m</html>[m
\ No newline at end of file[m
[1mdiff --git a/LifeNotebook/src/main/resources/templates/accounting.html b/LifeNotebook/src/main/resources/templates/accounting.html[m
[1mnew file mode 100644[m
[1mindex 0000000..f1c2795[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/resources/templates/accounting.html[m
[36m@@ -0,0 +1,110 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html xmlns:th="http://www.thymeleaf.org">[m
[32m+[m
[32m+[m[32m<head>[m
[32m+[m[32m    <meta charset="UTF-8">[m
[32m+[m[32m    <meta http-equiv="X-UA-Compatible" content="IE=edge">[m
[32m+[m[32m    <meta name="viewport" content="width=device-width, initial-scale=1.0">[m
[32m+[m[32m    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"[m
[32m+[m[32m        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">[m
[32m+[m[32m    <title>帳本管理系統</title>[m
[32m+[m
[32m+[m[32m    <style>[m
[32m+[m[32m        h1,[m
[32m+[m[32m        h2 {[m
[32m+[m[32m            text-align: center;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .head_content {[m
[32m+[m[32m            margin-bottom: 20px;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .search {[m
[32m+[m[32m            text-align: center;[m
[32m+[m[32m        }[m
[32m+[m[32m    </style>[m
[32m+[m
[32m+[m[32m</head>[m
[32m+[m
[32m+[m[32m<body>[m
[32m+[m	[32m<div class="container mb-3">[m
[32m+[m[32m        <div class="row">[m
[32m+[m[32m            <div class="col-12 d-flex justify-content-end">[m
[32m+[m[32m                <a href="/logout" class="btn btn-danger btn-sm m-2">Logout</a>[m
[32m+[m[32m                <a href="/change-password" class="btn btn-warning btn-sm m-2">更換密碼</a>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m    </div>[m
[32m+[m[41m	[m
[32m+[m	[32m<div class="container mb-3">[m
[32m+[m[32m        <!-- 帳本管理系統 -->[m
[32m+[m[32m        <div class="row">[m
[32m+[m[32m            <div class="col-12">[m
[32m+[m[32m                <h1>帳本管理系統</h1>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <!-- 資料筆數 -->[m
[32m+[m[32m        <div class="row">[m
[32m+[m[32m            <div class="col-12">[m
[32m+[m[32m                <h2>[m
[32m+[m[32m                    目前資料筆數: <span th:text="${dataCount}">0</span>[m
[32m+[m[32m                </h2>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <!-- 搜尋日期 -->[m
[32m+[m[32m        <form class="row" action="/search" method="get">[m
[32m+[m[32m            <div class="col-5">[m
[32m+[m[32m                <label for="startDate">開始日期:</label>[m
[32m+[m[32m                <input class="form-control" type="date" id="startDate" name="startDate" required>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div class="col-5">[m
[32m+[m[32m                <label for="endDate">結束日期:</label>[m
[32m+[m[32m                <input class="form-control" type="date" id="endDate" name="endDate" required>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div class="col-2 d-flex justify-content-center align-items-end">[m
[32m+[m[32m                <button type="submit" class="btn btn-secondary">Search</button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </form>[m
[32m+[m[32m    </div>[m
[32m+[m[41m	[m
[32m+[m	[32m<hr>[m
[32m+[m
[32m+[m[32m    <div class="container">[m
[32m+[m[32m        <a th:href="@{accounting/addData}" class="btn btn-success btn-sm mb-3">新增收入/支出</a>[m
[32m+[m
[32m+[m[32m        <table class="table table-bordered table-striped">[m
[32m+[m[32m            <thead class="table-dark">[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                    <th>日期</th>[m
[32m+[m[32m                    <th>分類</th>[m
[32m+[m[32m                    <th>收入/支出</th>[m
[32m+[m[32m                    <th>項目</th>[m
[32m+[m[32m                    <th>金額</th>[m
[32m+[m[32m                    <th>備註</th>[m
[32m+[m[32m                    <th>編輯/刪除</th>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m            </thead>[m
[32m+[m[32m            <tbody>[m
[32m+[m[32m                <tr th:each="tempAccounting: ${Accounting}">[m
[32m+[m[32m                    <td th:text="${tempAccounting.date}" />[m
[32m+[m[32m                    <td th:text="${tempAccounting.category}" />[m
[32m+[m[32m                    <td th:text="${tempAccounting.balance}" />[m
[32m+[m[32m                    <td th:text="${tempAccounting.name}" />[m
[32m+[m[32m                    <td th:text="${tempAccounting.amount}" />[m
[32m+[m[32m                    <td th:text="${tempAccounting.note}" />[m
[32m+[m[32m                    <td>[m
[32m+[m[32m                        <a th:href="@{/edit/{id}(id=${tempAccounting.id})}" class="btn btn-primary btn-sm">編輯</a>[m
[32m+[m[32m                        <a th:href="@{/delete/{id}(id=${tempAccounting.id})}" class="btn btn-danger btn-sm" button[m
[32m+[m[32m                            type="submit" onclick="return confirm('確認刪除?')">刪除</a>[m
[32m+[m
[32m+[m[32m                    </td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m            </tbody>[m
[32m+[m[32m        </table>[m
[32m+[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m
[32m+[m[32m</body>[m
[32m+[m
[32m+[m[32m</html>[m
\ No newline at end of file[m
[1mdiff --git a/LifeNotebook/src/main/resources/templates/add-data-form.html b/LifeNotebook/src/main/resources/templates/add-data-form.html[m
[1mnew file mode 100644[m
[1mindex 0000000..40e9b60[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/resources/templates/add-data-form.html[m
[36m@@ -0,0 +1,71 @@[m
[32m+[m[32m<!DOCTYPE HTML>[m
[32m+[m[32m<html xmlns:th="http://www.thymeleaf.org">[m
[32m+[m
[32m+[m[32m<head>[m
[32m+[m[32m    <!-- Required meta tags -->[m
[32m+[m[41m  [m	[32m<meta charset="UTF-8">[m
[32m+[m[41m  [m	[32m<meta http-equiv="X-UA-Compatible" content="IE=edge">[m
[32m+[m[41m  [m	[32m<meta name="viewport" content="width=device-width, initial-scale=1.0">[m
[32m+[m
[32m+[m[32m    <!-- Bootstrap CSS -->[m
[32m+[m[32m    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">[m
[32m+[m
[32m+[m[32m    <title>新增項目</title>[m
[32m+[m[32m</head>[m
[32m+[m
[32m+[m[32m<body>[m
[32m+[m
[32m+[m[32m    <div class="container">[m
[32m+[m
[32m+[m[32m        <h3>新增項目</h3>[m
[32m+[m[32m        <hr>[m
[32m+[m
[32m+[m[32m        <form action="#" th:action="@{/accounting/addData}"[m
[32m+[m[32m                         th:object="${Accounting}" method="POST">[m
[32m+[m[41m          [m
[32m+[m[32m            <label for="category">日期</label>[m
[32m+[m[32m            <input type="date"  name="date"[m
[32m+[m[32m                   class="form-control mb-4 w-25" placeholder="日期" required>[m
[32m+[m[41m			[m
[32m+[m[41m			[m
[32m+[m			[32m<label for="category">分類</label>[m
[32m+[m		[32m    <select th:field="*{category}" class="form-control mb-4 w-25" required>[m
[32m+[m		[32m      <option value="飲食">飲食</option>[m
[32m+[m		[32m      <option value="治裝">治裝</option>[m
[32m+[m		[32m      <option value="住房">住房</option>[m
[32m+[m[32m          <option value="交通">交通</option>[m
[32m+[m[32m          <option value="教育">教育</option>[m
[32m+[m[32m          <option value="娛樂">娛樂</option>[m
[32m+[m[32m          <option value="稅捐">稅捐</option>[m
[32m+[m[32m          <option value="薪資收入">薪資收入</option>[m
[32m+[m[32m          <option value="投資獲利">投資獲利</option>[m
[32m+[m[32m          <option value="資產出售">資產出售</option>[m
[32m+[m[32m          <option value="其他">其他</option>[m
[32m+[m		[32m    </select>[m
[32m+[m[41m			      [m
[32m+[m[32m          <label for="balance">收入/支出</label>[m
[32m+[m[32m            <select th:field="*{balance}" class="form-control mb-4 w-25" required>[m
[32m+[m		[32m      <option value="收入">收入</option>[m
[32m+[m		[32m      <option value="支出">支出</option>[m
[32m+[m[32m             </select>[m
[32m+[m[32m          <label for="name">名稱</label>[m
[32m+[m[32m           <input  type="text" th:field="*{name}"[m
[32m+[m[32m                   class="form-control mb-4 w-25" placeholder="名稱" required>[m
[32m+[m[32m          <label for="amount">價格</label>[m
[32m+[m[32m           <input  type="number" th:field="*{amount}"[m
[32m+[m[32m                   class="form-control mb-4 w-25" placeholder="輸入數字" required>[m
[32m+[m[32m          <label for="note">備註</label>[m
[32m+[m[32m           <input  type="text" th:field="*{note}"[m
[32m+[m[32m                   class="form-control mb-4 w-25" placeholder="輸入備註" required>[m
[32m+[m
[32m+[m[32m            <button type="submit" class="btn btn-success btn-sm mb-3">Save</button>[m
[32m+[m
[32m+[m[32m        </form>[m
[32m+[m
[32m+[m[41m        [m
[32m+[m[32m        <a th:href="@{/accounting}" class="btn btn-info col-2">回到帳本</a>[m
[32m+[m		[32m<hr>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m</body>[m
[32m+[m[32m</html>[m
\ No newline at end of file[m
[1mdiff --git a/LifeNotebook/src/main/resources/templates/admin-change-password.html b/LifeNotebook/src/main/resources/templates/admin-change-password.html[m
[1mnew file mode 100644[m
[1mindex 0000000..edec0aa[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/resources/templates/admin-change-password.html[m
[36m@@ -0,0 +1,69 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html xmlns:th="http://www.thymeleaf.org">[m
[32m+[m[32m<head>[m
[32m+[m[32m    <meta charset="UTF-8">[m
[32m+[m[32m    <title>Update Account</title>[m
[32m+[m[32m    <style>[m
[32m+[m[32m        body {[m
[32m+[m[32m            font-family: Arial, sans-serif;[m
[32m+[m[32m            background-color: #f0f0f0;[m
[32m+[m[32m            display: flex;[m
[32m+[m[32m            justify-content: center;[m
[32m+[m[32m            align-items: center;[m
[32m+[m[32m            height: 100vh;[m
[32m+[m[32m        }[m
[32m+[m[32m        .container {[m
[32m+[m[32m            width: 400px;[m
[32m+[m[32m            background-color: #333;[m
[32m+[m[32m            border-radius: 10px;[m
[32m+[m[32m            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);[m
[32m+[m[32m            color: #fff;[m
[32m+[m[32m            padding: 30px;[m
[32m+[m[32m            box-sizing: border-box;[m
[32m+[m[32m        }[m
[32m+[m[32m        .alert {[m
[32m+[m[32m            color: red;[m
[32m+[m[32m        }[m
[32m+[m[32m        input, button {[m
[32m+[m[32m            width: 100%;[m
[32m+[m[32m            padding: 10px;[m
[32m+[m[32m            margin: 10px 0;[m
[32m+[m[32m            border: none;[m
[32m+[m[32m            border-radius: 5px;[m
[32m+[m[32m            box-sizing: border-box;[m
[32m+[m[32m        }[m
[32m+[m[32m        button {[m
[32m+[m[32m            background-color: #4CAF50;[m
[32m+[m[32m            color: #fff;[m
[32m+[m[32m            cursor: pointer;[m
[32m+[m[32m        }[m
[32m+[m[32m    </style>[m
[32m+[m[32m</head>[m
[32m+[m[32m<body>[m
[32m+[m[32m    <div class="container">[m
[32m+[m[32m        <h2>Update Account</h2>[m
[32m+[m
[32m+[m[32m        <!-- 顯示錯誤訊息 -->[m
[32m+[m[32m        <div th:if="${error}" class="alert">[m
[32m+[m[32m            <span th:text="${error}"></span>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <!-- 顯示成功訊息 -->[m
[32m+[m[32m        <div th:if="${message}" class="alert" style="color: green;">[m
[32m+[m[32m            <span th:text="${message}"></span>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <form "@{/system/admin-change-password/{id}(id=${user.id})}" th:object="${user}" method="post">[m
[32m+[m[41m        [m	[32m<input type="hidden" th:value="${user.id}">[m
[32m+[m[32m            <input type="text" name="email" th:value="${user.email}" required>[m
[32m+[m[32m            <input type="text" name="role" th:value="${user.role}" required>[m
[32m+[m[32m            <input type="password" name="password" placeholder="New Password" required>[m
[32m+[m[32m            <button type="submit">Update Account</button>[m
[32m+[m[32m        </form>[m
[32m+[m[32m        <form method="get" th:action="@{/system}">[m
[32m+[m[41m                [m	[32m<button type="submit" class="btn signup-btn">返回管理系統</button>[m
[32m+[m[32m           </form>[m
[32m+[m[41m        [m
[32m+[m[32m    </div>[m
[32m+[m[32m</body>[m
[32m+[m[32m</html>[m
\ No newline at end of file[m
[1mdiff --git a/LifeNotebook/src/main/resources/templates/change-password.html b/LifeNotebook/src/main/resources/templates/change-password.html[m
[1mnew file mode 100644[m
[1mindex 0000000..0613ba2[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/resources/templates/change-password.html[m
[36m@@ -0,0 +1,68 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html xmlns:th="http://www.thymeleaf.org">[m
[32m+[m[32m<head>[m
[32m+[m[32m    <meta charset="UTF-8">[m
[32m+[m[32m    <title>Change Password</title>[m
[32m+[m[32m    <style>[m
[32m+[m[32m        body {[m
[32m+[m[32m            font-family: Arial, sans-serif;[m
[32m+[m[32m            background-color: #f0f0f0;[m
[32m+[m[32m            display: flex;[m
[32m+[m[32m            justify-content: center;[m
[32m+[m[32m            align-items: center;[m
[32m+[m[32m            height: 100vh;[m
[32m+[m[32m        }[m
[32m+[m[32m        .container {[m
[32m+[m[32m            width: 400px;[m
[32m+[m[32m            background-color: #333;[m
[32m+[m[32m            border-radius: 10px;[m
[32m+[m[32m            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);[m
[32m+[m[32m            color: #fff;[m
[32m+[m[32m            padding: 30px;[m
[32m+[m[32m            box-sizing: border-box;[m
[32m+[m[32m        }[m
[32m+[m[32m        .alert {[m
[32m+[m[32m            color: red;[m
[32m+[m[32m        }[m
[32m+[m[32m        input, button {[m
[32m+[m[32m            width: 100%;[m
[32m+[m[32m            padding: 10px;[m
[32m+[m[32m            margin: 10px 0;[m
[32m+[m[32m            border: none;[m
[32m+[m[32m            border-radius: 5px;[m
[32m+[m[32m            box-sizing: border-box;[m
[32m+[m[32m        }[m
[32m+[m[32m        button {[m
[32m+[m[32m            background-color: #4CAF50;[m
[32m+[m[32m            color: #fff;[m
[32m+[m[32m            cursor: pointer;[m
[32m+[m[32m        }[m
[32m+[m[32m    </style>[m
[32m+[m[32m</head>[m
[32m+[m[32m<body>[m
[32m+[m[32m    <div class="container">[m
[32m+[m[32m        <h2>Change Password</h2>[m
[32m+[m
[32m+[m[32m        <!-- 顯示錯誤訊息 -->[m
[32m+[m[32m        <div th:if="${error}" class="alert">[m
[32m+[m[32m            <span th:text="${error}"></span>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <!-- 顯示成功訊息 -->[m
[32m+[m[32m        <div th:if="${message}" class="alert" style="color: green;">[m
[32m+[m[32m            <span th:text="${message}"></span>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m	[32m        <form th:action="@{/update-password}" method="post">[m
[32m+[m			[32m    <label for="oldPassword">Old Password:</label>[m
[32m+[m			[32m    <input type="password" id="oldPassword" name="oldPassword" required>[m
[32m+[m			[32m    <label for="newPassword">New Password:</label>[m
[32m+[m			[32m    <input type="password" id="newPassword" name="newPassword" required>[m
[32m+[m			[32m    <button type="submit">Update Password</button>[m
[32m+[m			[32m</form>[m
[32m+[m				[32m<form method="get" th:action="@{/accounting}">[m
[32m+[m[41m                [m	[32m<button type="submit" class="btn signup-btn">返回帳本</button>[m
[32m+[m[41m            [m	[32m</form>[m
[32m+[m[41m    [m	[32m</div>[m
[32m+[m[32m</body>[m
[32m+[m[32m</html>[m
\ No newline at end of file[m
[1mdiff --git a/LifeNotebook/src/main/resources/templates/edit-data-form.html b/LifeNotebook/src/main/resources/templates/edit-data-form.html[m
[1mnew file mode 100644[m
[1mindex 0000000..02ece4a[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/resources/templates/edit-data-form.html[m
[36m@@ -0,0 +1,70 @@[m
[32m+[m[32m<!DOCTYPE HTML>[m
[32m+[m[32m<html xmlns:th="http://www.thymeleaf.org">[m
[32m+[m
[32m+[m[32m<head>[m
[32m+[m[32m    <!-- Required meta tags -->[m
[32m+[m[32m   <meta charset="UTF-8">[m
[32m+[m[32m   <meta http-equiv="X-UA-Compatible" content="IE=edge">[m
[32m+[m[32m   <meta name="viewport" content="width=device-width, initial-scale=1.0">[m
[32m+[m
[32m+[m[32m    <!-- Bootstrap CSS -->[m
[32m+[m[32m    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">[m
[32m+[m
[32m+[m[32m    <title>編輯項目</title>[m
[32m+[m[32m</head>[m
[32m+[m
[32m+[m[32m<body>[m
[32m+[m[32m    <div class="container">[m
[32m+[m
[32m+[m[32m        <h3>編輯項目</h3>[m
[32m+[m[32m        <hr>[m
[32m+[m
[32m+[m[32m        <form th:action="@{/edit/{id}(id=${tempAccounting.id})}" th:object="${tempAccounting}" method="POST">[m
[32m+[m[32m           <input type="hidden" th:field="*{id}">[m
[32m+[m[32m            <label for="category">日期</label>[m
[32m+[m[32m   <input type="date" th:value="${tempAccounting.date}" name="date"[m
[32m+[m[32m          class="form-control mb-4 w-25"[m[41m [m
[32m+[m[32m          required>[m
[32m+[m[41m   [m
[32m+[m[41m   [m
[32m+[m[32m   <label for="category">分類</label>[m
[32m+[m[32m      <select th:field="*{category}" class="form-control mb-4 w-25" required>[m
[32m+[m[32m        <option value="飲食">飲食</option>[m
[32m+[m[32m        <option value="治裝">治裝</option>[m
[32m+[m[32m        <option value="住房">住房</option>[m
[32m+[m[32m          <option value="交通">交通</option>[m
[32m+[m[32m          <option value="教育">教育</option>[m
[32m+[m[32m          <option value="娛樂">娛樂</option>[m
[32m+[m[32m          <option value="稅捐">稅捐</option>[m
[32m+[m[32m          <option value="薪資收入">薪資收入</option>[m
[32m+[m[32m          <option value="投資獲利">投資獲利</option>[m
[32m+[m[32m          <option value="資產出售">資產出售</option>[m
[32m+[m[32m          <option value="其他">其他</option>[m
[32m+[m[32m      </select>[m
[32m+[m[41m         [m
[32m+[m[32m          <label for="balance">收入/支出</label>[m
[32m+[m[32m            <select th:field="*{balance}" class="form-control mb-4 w-25" required>[m
[32m+[m[32m        <option value="收入">收入</option>[m
[32m+[m[32m        <option value="支出">支出</option>[m
[32m+[m[32m             </select>[m
[32m+[m[32m          <label for="name">名稱</label>[m
[32m+[m[32m           <input  type="text" th:field="*{name}"[m
[32m+[m[32m                   class="form-control mb-4 w-25" placeholder="名稱" required>[m
[32m+[m[32m          <label for="amount">價格</label>[m
[32m+[m[32m           <input  type="number" th:field="*{amount}"[m
[32m+[m[32m                   class="form-control mb-4 w-25" placeholder="輸入數字">[m
[32m+[m[32m          <label for="note">備註</label>[m
[32m+[m[32m           <input  type="text" th:field="*{note}"[m
[32m+[m[32m                   class="form-control mb-4 w-25" placeholder="輸入備註">[m
[32m+[m
[32m+[m[32m            <button type="submit" class="btn btn-success btn-sm mb-3">Change</button>[m
[32m+[m
[32m+[m[32m        </form>[m
[32m+[m
[32m+[m[41m        [m
[32m+[m[32m        <a th:href="@{/accounting}" class="btn btn-info col-2">回到帳本</a>[m
[32m+[m[32m  <hr>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m</body>[m
[32m+[m[32m</html>[m
\ No newline at end of file[m
[1mdiff --git a/LifeNotebook/src/main/resources/templates/login.html b/LifeNotebook/src/main/resources/templates/login.html[m
[1mnew file mode 100644[m
[1mindex 0000000..7dbc3ba[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/resources/templates/login.html[m
[36m@@ -0,0 +1,164 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html xmlns:th="http://www.thymeleaf.org">[m
[32m+[m[32m<head>[m
[32m+[m[32m    <meta charset="UTF-8">[m
[32m+[m[32m    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">[m
[32m+[m[32m    <title>Login & Register</title>[m
[32m+[m[32m    <style>[m
[32m+[m[32m        body {[m
[32m+[m[32m            font-family: Arial, sans-serif;[m
[32m+[m[32m            background-color: #f0f0f0;[m
[32m+[m[32m            margin: 0;[m
[32m+[m[32m            display: flex;[m
[32m+[m[32m            justify-content: center;[m
[32m+[m[32m            align-items: center;[m
[32m+[m[32m            height: 100vh;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .container {[m
[32m+[m[32m            display: flex;[m
[32m+[m[32m            width: 700px;[m
[32m+[m[32m            height: 380px;[m
[32m+[m[32m            background-color: #333;[m
[32m+[m[32m            border-radius: 10px;[m
[32m+[m[32m            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);[m
[32m+[m[32m            color: #fff;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .left, .right {[m
[32m+[m[32m            flex: 1;[m
[32m+[m[32m            padding: 30px;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .left {[m
[32m+[m[32m            border-right: 1px solid #555;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        h2 {[m
[32m+[m[32m            margin-bottom: 20px;[m
[32m+[m[32m            font-weight: normal;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        input {[m
[32m+[m[32m            width: 100%;[m
[32m+[m[32m            padding: 10px;[m
[32m+[m[32m            margin: 10px 0;[m
[32m+[m[32m            border: none;[m
[32m+[m[32m            border-radius: 5px;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .btn {[m
[32m+[m[32m            display: inline-block;[m
[32m+[m[32m            padding: 10px 20px;[m
[32m+[m[32m            border: none;[m
[32m+[m[32m            background-color: #e57373;[m
[32m+[m[32m            color: #fff;[m
[32m+[m[32m            border-radius: 5px;[m
[32m+[m[32m            cursor: pointer;[m
[32m+[m[32m            font-size: 14px;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .btn:hover {[m
[32m+[m[32m            background-color: #d32f2f;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .signup-btn {[m
[32m+[m[32m            background-color: #bdbdbd;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .signup-btn:hover {[m
[32m+[m[32m            background-color: #757575;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m		[32m.checkbox {[m
[32m+[m		[32m    display: flex;[m
[32m+[m		[32m    align-items: center;[m
[32m+[m		[32m    margin: 10px 0;[m
[32m+[m		[32m}[m
[32m+[m
[32m+[m		[32m.checkbox input[type="checkbox"] {[m
[32m+[m		[32m    margin-right: 1px;[m
[32m+[m		[32m}[m
[32m+[m
[32m+[m		[32m.btn {[m
[32m+[m		[32m    display: inline-block;[m
[32m+[m		[32m    padding: 10px 20px;[m
[32m+[m		[32m    border: none;[m
[32m+[m		[32m    background-color: #4CAF50;[m
[32m+[m		[32m    color: #fff;[m
[32m+[m		[32m    border-radius: 5px;[m
[32m+[m		[32m    cursor: pointer;[m
[32m+[m		[32m    font-size: 14px;[m
[32m+[m		[32m    margin-top: 10px;[m
[32m+[m		[32m}[m
[32m+[m
[32m+[m		[32m.btn:hover {[m
[32m+[m		[32m    background-color: #1d953f;[m
[32m+[m		[32m}[m
[32m+[m
[32m+[m[32m        .small-text {[m
[32m+[m[32m            font-size: 12px;[m
[32m+[m[32m            color: #ccc;[m
[32m+[m[32m        }[m
[32m+[m[32m    </style>[m
[32m+[m[32m</head>[m
[32m+[m[32m<body>[m
[32m+[m
[32m+[m
[32m+[m	[32m<br>[m
[32m+[m[32m    <div class="container">[m
[32m+[m		[32m<div class="left">[m
[32m+[m		[32m    <h2>登入</h2>[m
[32m+[m[41m		    [m
[32m+[m		[32m     <!-- Place for messages: error, alert etc ... -->[m
[32m+[m[32m                        <div class="form-group">[m
[32m+[m[32m                            <div class="col-xs-15">[m
[32m+[m[32m                                <div>[m
[32m+[m[32m                                    <!-- Check for login error -->[m
[32m+[m[32m                                    <div th:if="${param.error}">[m
[32m+[m[32m                                        <div class="alert alert-danger col-xs-offset-1 col-xs-10">[m
[32m+[m[32m                                            Invalid username and password.[m
[32m+[m[32m                                        </div>[m
[32m+[m[32m                                    </div>[m
[32m+[m[32m                                    <!-- Check for logout -->[m
[32m+[m[32m                                    <div th:if="${param.logout}">[m
[32m+[m[32m                                        <div class="alert alert-success col-xs-offset-1 col-xs-10">[m
[32m+[m[32m                                            You have been logged out.[m
[32m+[m[32m                                        </div>[m
[32m+[m[32m                                    </div>[m
[32m+[m[32m                                </div>[m
[32m+[m[32m                            </div>[m
[32m+[m[32m                        </div>[m
[32m+[m[41m		    [m
[32m+[m		[32m    <form method="post" th:action="@{/login}">[m
[32m+[m		[32m        <input type="text" name="username" placeholder="Username" required>[m
[32m+[m		[32m        <input type="password" name="password" placeholder="Password" required>[m
[32m+[m[41m		        [m
[32m+[m		[32m        <!-- Remember me[m
[32m+[m		[32m        <div class="checkbox">[m
[32m+[m		[32m            <input type="checkbox" id="remember">[m
[32m+[m		[32m        </div>[m
[32m+[m		[32m         -->[m
[32m+[m[41m		         [m
[32m+[m		[32m        <button type="submit" class="btn">Login</button>[m
[32m+[m		[32m    </form>[m
[32m+[m		[32m</div>[m
[32m+[m
[32m+[m[32m        <div class="right">[m
[32m+[m[32m            <h2>註冊免費帳號</h2>[m
[32m+[m[32m            <span style="color: #4CAF50; font-size: 14px;">Free Account</span>[m
[32m+[m[41m          [m
[32m+[m[32m            <form method="get" th:action="@{/register-free-account}">[m
[32m+[m[32m                <button type="submit" class="btn signup-btn">Signup</button>[m
[32m+[m[32m            </form>[m
[32m+[m[32m          <br>[m
[32m+[m[32m          <h2>註冊收費帳號</h2>[m
[32m+[m[32m            <span style="color: #4CAF50; font-size: 14px;">Premium Account</span>[m
[32m+[m[41m          [m
[32m+[m[32m            <form method="get" th:action="@{/register-paid-account}">[m
[32m+[m[32m                <button type="submit" class="btn signup-btn">Signup</button>[m
[32m+[m[32m            </form>[m
[32m+[m[32m        </div>[m
[32m+[m[32m    </div>[m
[32m+[m[32m</body>[m
[32m+[m[32m</html>[m
[1mdiff --git a/LifeNotebook/src/main/resources/templates/register-free-account.html b/LifeNotebook/src/main/resources/templates/register-free-account.html[m
[1mnew file mode 100644[m
[1mindex 0000000..29ed54f[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/resources/templates/register-free-account.html[m
[36m@@ -0,0 +1,121 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html xmlns:th="http://www.thymeleaf.org">[m
[32m+[m
[32m+[m[32m<head>[m
[32m+[m[32m    <meta charset="UTF-8">[m
[32m+[m[32m    <meta http-equiv="X-UA-Compatible" content="IE=edge">[m
[32m+[m[32m    <meta name="viewport" content="width=device-width, initial-scale=1.0">[m
[32m+[m[32m    <title>Register Free Account</title>[m
[32m+[m[32m    <style>[m
[32m+[m[32m        body {[m
[32m+[m[32m            font-family: Arial, sans-serif;[m
[32m+[m[32m            background-color: #f0f0f0;[m
[32m+[m[32m            margin: 0;[m
[32m+[m[32m            display: flex;[m
[32m+[m[32m            justify-content: center;[m
[32m+[m[32m            align-items: center;[m
[32m+[m[32m            height: 100vh;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .container {[m
[32m+[m[32m            width: 400px;[m
[32m+[m[32m            background-color: #333;[m
[32m+[m[32m            border-radius: 10px;[m
[32m+[m[32m            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);[m
[32m+[m[32m            color: #fff;[m
[32m+[m[32m            padding: 30px;[m
[32m+[m[32m            box-sizing: border-box;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        h2 {[m
[32m+[m[32m            margin-bottom: 20px;[m
[32m+[m[32m            font-weight: normal;[m
[32m+[m[32m            text-align: center;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        input {[m
[32m+[m[32m            width: 100%;[m
[32m+[m[32m            padding: 10px;[m
[32m+[m[32m            margin: 10px 0;[m
[32m+[m[32m            border: none;[m
[32m+[m[32m            border-radius: 5px;[m
[32m+[m[32m            box-sizing: border-box;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .btn {[m
[32m+[m[32m            display: inline-block;[m
[32m+[m[32m            width: 100%;[m
[32m+[m[32m            padding: 10px;[m
[32m+[m[32m            border: none;[m
[32m+[m[32m            background-color: #4CAF50;[m
[32m+[m[32m            color: #fff;[m
[32m+[m[32m            border-radius: 5px;[m
[32m+[m[32m            cursor: pointer;[m
[32m+[m[32m            font-size: 14px;[m
[32m+[m[32m            margin-top: 10px;[m
[32m+[m[32m            text-align: center;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .btn:hover {[m
[32m+[m[32m            background-color: #1d953f;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        p {[m
[32m+[m[32m            font-size: 12px;[m
[32m+[m[32m            color: #ccc;[m
[32m+[m[32m            text-align: center;[m
[32m+[m[32m            margin-top: 10px;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        a {[m
[32m+[m[32m            color: #4CAF50;[m
[32m+[m[32m            text-decoration: none;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        a:hover {[m
[32m+[m[32m            text-decoration: underline;[m
[32m+[m[32m        }[m
[32m+[m[32m    </style>[m
[32m+[m[32m</head>[m
[32m+[m
[32m+[m[32m<body>[m
[32m+[m[32m    <div class="container">[m
[32m+[m[32m        <h2>註冊免費帳號</h2>[m
[32m+[m[32m        <form th:action="@{/register-free-account}" th:object="${registrationDto}" method="post">[m
[32m+[m
[32m+[m[32m            <!-- Place for messages: error, alert etc ... -->[m
[32m+[m[32m            <div class="form-group">[m
[32m+[m[32m                <div class="col-xs-15">[m
[32m+[m[32m                    <div>[m
[32m+[m[32m                        <!-- Check for login error -->[m
[32m+[m[32m                        <div th:if="${param.registrationError}">[m
[32m+[m[32m                            <div class="alert alert-danger col-xs-offset-1 col-xs-10">[m
[32m+[m[32m                                <span th:text="${param.registrationError}"></span>[m
[32m+[m[32m                            </div>[m
[32m+[m[32m                        </div>[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <input type="text" name="username" placeholder="Username" required>[m
[32m+[m[32m            <div th:if="${#fields.hasErrors('username')}" th:errors="*{username}" class="text-danger"></div>[m
[32m+[m			[32m<div th:if="${registrationError}" class="alert alert-danger">[m
[32m+[m[41m    [m			[32m<span th:text="${registrationError}"></span>[m
[32m+[m			[32m</div>[m
[32m+[m
[32m+[m[32m            <input type="password" name="password" placeholder="Password" required>[m
[32m+[m[32m            <div th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="text-danger"></div>[m
[32m+[m
[32m+[m
[32m+[m[32m            <input type="email" name="email" placeholder="Email" required>[m
[32m+[m[32m            <div th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="text-danger"></div>[m
[32m+[m
[32m+[m
[32m+[m[32m            <button type="submit" class="btn">Signup</button>[m
[32m+[m[32m        </form>[m
[32m+[m[32m        <p>Already hava an account? <a href="/login">Login here</a></p>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m</body>[m
[32m+[m
[32m+[m[32m</html>[m
\ No newline at end of file[m
[1mdiff --git a/LifeNotebook/src/main/resources/templates/register-paid-account.html b/LifeNotebook/src/main/resources/templates/register-paid-account.html[m
[1mnew file mode 100644[m
[1mindex 0000000..69657b7[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/resources/templates/register-paid-account.html[m
[36m@@ -0,0 +1,92 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html xmlns:th="http://www.thymeleaf.org">[m
[32m+[m[32m<head>[m
[32m+[m[32m  <meta charset="UTF-8">[m
[32m+[m[32m  <meta http-equiv="X-UA-Compatible" content="IE=edge">[m
[32m+[m[32m  <meta name="viewport" content="width=device-width, initial-scale=1.0">[m
[32m+[m[32m  <title>Register Paid Account</title>[m
[32m+[m[32m  <style>[m
[32m+[m[32m        body {[m
[32m+[m[32m            font-family: Arial, sans-serif;[m
[32m+[m[32m            background-color: #f0f0f0;[m
[32m+[m[32m            margin: 0;[m
[32m+[m[32m            display: flex;[m
[32m+[m[32m            justify-content: center;[m
[32m+[m[32m            align-items: center;[m
[32m+[m[32m            height: 100vh;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .container {[m
[32m+[m[32m            width: 400px;[m
[32m+[m[32m            background-color: #333;[m
[32m+[m[32m            border-radius: 10px;[m
[32m+[m[32m            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);[m
[32m+[m[32m            color: #fff;[m
[32m+[m[32m            padding: 30px;[m
[32m+[m[32m            box-sizing: border-box;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        h2 {[m
[32m+[m[32m            margin-bottom: 20px;[m
[32m+[m[32m            font-weight: normal;[m
[32m+[m[32m            text-align: center;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        input {[m
[32m+[m[32m            width: 100%;[m
[32m+[m[32m            padding: 10px;[m
[32m+[m[32m            margin: 10px 0;[m
[32m+[m[32m            border: none;[m
[32m+[m[32m            border-radius: 5px;[m
[32m+[m[32m            box-sizing: border-box;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .btn {[m
[32m+[m[32m            display: inline-block;[m
[32m+[m[32m            width: 100%;[m
[32m+[m[32m            padding: 10px;[m
[32m+[m[32m            border: none;[m
[32m+[m[32m            background-color: #4CAF50;[m
[32m+[m[32m            color: #fff;[m
[32m+[m[32m            border-radius: 5px;[m
[32m+[m[32m            cursor: pointer;[m
[32m+[m[32m            font-size: 14px;[m
[32m+[m[32m            margin-top: 10px;[m
[32m+[m[32m            text-align: center;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .btn:hover {[m
[32m+[m[32m            background-color: #1d953f;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        p {[m
[32m+[m[32m            font-size: 12px;[m
[32m+[m[32m            color: #ccc;[m
[32m+[m[32m            text-align: center;[m
[32m+[m[32m            margin-top: 10px;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        a {[m
[32m+[m[32m            color: #4CAF50;[m
[32m+[m[32m            text-decoration: none;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        a:hover {[m
[32m+[m[32m            text-decoration: underline;[m
[32m+[m[32m        }[m
[32m+[m[32m    </style>[m
[32m+[m[32m</head>[m
[32m+[m[32m<body>[m
[32m+[m[32m  <div class="container">[m
[32m+[m[32m    <h2>註冊付費帳號</h2>[m
[32m+[m[32m    <form th:action="@{/registerPaid}" method="post">[m
[32m+[m[32m      <input type="text" name="username" placeholder="Username" required>[m
[32m+[m[32m      <input type="password" name="password" placeholder="Password" required>[m
[32m+[m[32m      <input type="email" name="email" placeholder="Email" required>[m[41m [m
[32m+[m[32m      <button type="submit" class="btn">Singup</button>[m
[32m+[m[32m    </form>[m
[32m+[m[32m    <p>Already hava an account? <a href="/login">Login here</a></p>[m
[32m+[m[32m  </div>[m
[32m+[m[41m  [m
[32m+[m[32m</body>[m
[32m+[m[32m</html>[m
\ No newline at end of file[m
[1mdiff --git a/LifeNotebook/src/main/resources/templates/search.html b/LifeNotebook/src/main/resources/templates/search.html[m
[1mnew file mode 100644[m
[1mindex 0000000..d1fd896[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/resources/templates/search.html[m
[36m@@ -0,0 +1,73 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html xmlns:th="http://www.thymeleaf.org">[m
[32m+[m[32m<head>[m
[32m+[m[32m  <meta charset="UTF-8">[m
[32m+[m[32m  <meta name="viewport" content="width=device-width, initial-scale=1.0">[m
[32m+[m[32m  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">[m
[32m+[m[32m  <title>搜尋結果</title>[m
[32m+[m[32m</head>[m
[32m+[m
[32m+[m[32m<style>[m
[32m+[m[32m  h1, h2 {[m
[32m+[m[32m            text-align: center;[m
[32m+[m[32m        }[m
[32m+[m[32m        .head_content {[m
[32m+[m[32m            margin-bottom: 20px;[m
[32m+[m[32m        }[m
[32m+[m[32m        .search {[m
[32m+[m[32m            text-align: center;[m
[32m+[m[32m        }[m
[32m+[m[32m  </style>[m
[32m+[m
[32m+[m[32m<body>[m
[32m+[m[32m  <div class="container mt-4">[m
[32m+[m[32m    <h1 class="text-center">搜尋結果</h1>[m
[32m+[m	[32m<h2>搜尋範圍: <span th:text="${startDate}"></span> ~ <span th:text="${endDate}"></span></h2>[m
[32m+[m	[32m<h2>符合條件的資料筆數: <span th:text="${dataCount}"></span></h2>[m
[32m+[m[41m  [m
[32m+[m[32m  <div class="search">[m
[32m+[m[41m      [m
[32m+[m[32m    <form action="/search" method="get">[m
[32m+[m[32m    <label for="startDate">開始日期:</label>[m
[32m+[m[32m    <input type="date" id="startDate" name="startDate" required>[m
[32m+[m[32m    <label for="endDate">結束日期:</label>[m
[32m+[m[32m    <input type="date" id="endDate" name="endDate" required>[m
[32m+[m[32m    <button type="submit" class="btn btn-secondary">Search</button>[m
[32m+[m[32m  </form>[m[41m [m
[32m+[m[32m</div>[m
[32m+[m
[32m+[m	[32m<hr>[m
[32m+[m[32m    <table class="table table-bordered table-striped">[m
[32m+[m[32m      <thead class="table-dark">[m
[32m+[m[32m        <tr>[m
[32m+[m[32m          <th>日期</th>[m
[32m+[m[32m          <th>分類</th>[m
[32m+[m[32m          <th>收入/支出</th>[m
[32m+[m[32m          <th>項目</th>[m
[32m+[m[32m          <th>金額</th>[m
[32m+[m[32m          <th>備註</th>[m
[32m+[m[32m          <th>編輯/刪除</th>[m
[32m+[m[32m        </tr>[m
[32m+[m[32m      </thead>[m
[32m+[m[32m      <tbody>[m
[32m+[m[32m        <tr th:each="tempAccounting : ${results}">[m
[32m+[m[32m          <td th:text="${tempAccounting.date}"></td>[m
[32m+[m[32m          <td th:text="${tempAccounting.category}"></td>[m
[32m+[m[32m          <td th:text="${tempAccounting.balance}"></td>[m
[32m+[m[32m          <td th:text="${tempAccounting.name}"></td>[m
[32m+[m[32m          <td th:text="${tempAccounting.amount}"></td>[m
[32m+[m[32m          <td th:text="${tempAccounting.note}"></td>[m
[32m+[m[32m          <td>[m
[32m+[m[32m            <a th:href="@{/edit/{id}(id=${tempAccounting.id})}" class="btn btn-primary btn-sm">編輯</a>[m
[32m+[m[32m            <a th:href="@{/delete/{id}(id=${tempAccounting.id})}" class="btn btn-danger btn-sm">刪除</a>[m
[32m+[m[32m          </td>[m
[32m+[m[32m        </tr>[m
[32m+[m[32m      </tbody>[m
[32m+[m[32m    </table>[m
[32m+[m
[32m+[m[32m    <div class="mt-3">[m
[32m+[m[32m      <a href="/accounting" class="btn btn-primary">返回帳本管理</a>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</body>[m
[32m+[m[32m</html>[m
\ No newline at end of file[m
[1mdiff --git a/LifeNotebook/src/main/resources/templates/system.html b/LifeNotebook/src/main/resources/templates/system.html[m
[1mnew file mode 100644[m
[1mindex 0000000..312003b[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/resources/templates/system.html[m
[36m@@ -0,0 +1,69 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html xmlns:th="http://www.thymeleaf.org">[m
[32m+[m[32m<head>[m
[32m+[m[32m  <meta charset="UTF-8">[m
[32m+[m[32m  <meta http-equiv="X-UA-Compatible" content="IE=edge">[m
[32m+[m[32m  <meta name="viewport" content="width=device-width, initial-scale=1.0">[m
[32m+[m[32m  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">[m
[32m+[m[32m  <title>使用者管理系統</title>[m
[32m+[m[41m  [m
[32m+[m[32m  <style>[m
[32m+[m[32m    h1, h2 {[m
[32m+[m[32m              text-align: center;[m
[32m+[m[32m          }[m
[32m+[m[32m          .head_content {[m
[32m+[m[32m              margin-bottom: 20px;[m
[32m+[m[32m          }[m
[32m+[m[32m          .search {[m
[32m+[m[32m              text-align: center;[m
[32m+[m[32m          }[m
[32m+[m[32m          .logout{[m
[32m+[m[41m          [m	[32mtext-align: right;[m
[32m+[m[41m          [m	[32mmargin-top: 20px;[m
[32m+[m[41m          [m	[32mmargin-right: 20px;[m
[32m+[m[32m          }[m
[32m+[m[32m    </style>[m
[32m+[m[41m  [m
[32m+[m[32m</head>[m
[32m+[m[32m<body>[m
[32m+[m	[32m<div class="logout">[m
[32m+[m	[32m<form method="post" th:action="@{/logout}">[m
[32m+[m	[32m<button type="submit" class="btn btn-danger btn-sm">Logout</button>[m
[32m+[m	[32m</form>[m
[32m+[m	[32m</div>[m
[32m+[m
[32m+[m[32m  <div class="head_content">[m
[32m+[m[32m    <h1>使用者管理系統</h1>[m
[32m+[m[32m    <h2>目前資料筆數: <span th:text="${dataCount}">0</span></h2>[m
[32m+[m[32m  </div>[m[41m      [m
[32m+[m[32m  <hr>[m
[32m+[m
[32m+[m[32m  <div class="container">[m
[32m+[m[32m    <table class="table table-bordered table-striped">[m
[32m+[m[32m      <thead class="table-dark">[m
[32m+[m[32m        <tr>[m
[32m+[m[32m          <th>使用者 ID</th>[m
[32m+[m[32m          <th>Email</th>[m
[32m+[m[32m          <th>使用者權限</th>[m
[32m+[m[32m          <th>編輯/刪除</th>[m
[32m+[m[32m        </tr>[m
[32m+[m[32m      </thead>[m
[32m+[m[32m        <tbody>[m
[32m+[m[32m          <tr th:each="user : ${users}">[m
[32m+[m[32m            <td th:text="${user.username}" />[m
[32m+[m[32m            <td th:text="${user.email}" />[m
[32m+[m[32m            <td th:text="${user.role}" />[m
[32m+[m[32m            <td>[m
[32m+[m[32m              <a th:href="@{/system/admin-change-password/{id}(id=${user.id})}" class="btn btn-primary btn-sm">編輯</a>[m
[32m+[m[32m              <a th:href="@{/system/delete/{id}(id=${user.id})}" class="btn btn-danger btn-sm" button type="submit" onclick="return confirm('確認刪除?')">刪除</a>[m
[32m+[m
[32m+[m[32m            </td>[m[41m       [m
[32m+[m[32m          </tr>[m
[32m+[m[32m        </tbody>[m
[32m+[m[32m    </table>[m
[32m+[m[41m [m
[32m+[m[32m  </div>[m
[32m+[m[41m  [m
[32m+[m[41m  [m
[32m+[m[32m</body>[m
[32m+[m[32m</html>[m
\ No newline at end of file[m
[1mdiff --git a/LifeNotebook/src/main/resources/templates/welcome.html b/LifeNotebook/src/main/resources/templates/welcome.html[m
[1mnew file mode 100644[m
[1mindex 0000000..ec7fa48[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/main/resources/templates/welcome.html[m
[36m@@ -0,0 +1,91 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m[32m<html lang="en">[m
[32m+[m[32m<head>[m
[32m+[m[32m    <meta charset="UTF-8">[m
[32m+[m[32m    <meta name="viewport" content="width=device-width, initial-scale=1.0">[m
[32m+[m[32m    <title>生活筆記本</title>[m
[32m+[m
[32m+[m[32m    <style>[m
[32m+[m[32m        /* 定義全局樣式，包括字體和背景色 */[m
[32m+[m[32m        body {[m
[32m+[m[32m            font-family: Arial, sans-serif;[m
[32m+[m[32m            margin: 0;[m
[32m+[m[32m            padding: 0;[m
[32m+[m[32m            background-color: #f9f9f9;[m
[32m+[m[32m        }[m
[32m+[m[32m        /* 頁面頂部的標題區域樣式 */[m
[32m+[m[32m        .header {[m
[32m+[m[32m            background-color: #4CAF50;[m
[32m+[m[32m            color: white;[m
[32m+[m[32m            padding: 20px;[m
[32m+[m[32m            text-align: center;[m
[32m+[m[32m        }[m
[32m+[m[32m        /* 導覽列的樣式，包括橫向排列和間距設定 */[m
[32m+[m[32m        .nav {[m
[32m+[m[32m            display: flex;[m
[32m+[m[32m            justify-content: flex-end;[m
[32m+[m[32m            background-color: #333;[m
[32m+[m[32m            padding: 10px;[m
[32m+[m[32m        }[m
[32m+[m[32m        /* 導覽列中連結的樣式，包含默認和懸停效果 */[m
[32m+[m[32m        .nav a {[m
[32m+[m[32m            color: white;[m
[32m+[m[32m            margin: 0 10px;[m
[32m+[m[32m            text-decoration: none;[m
[32m+[m[32m            padding: 8px 16px;[m
[32m+[m[32m        }[m
[32m+[m[32m        .nav a:hover {[m
[32m+[m[32m            background-color: #575757;[m
[32m+[m[32m            border-radius: 5px;[m
[32m+[m[32m        }[m
[32m+[m[32m        /* 主內容容器樣式，設置寬度和陰影效果 */[m
[32m+[m[32m        .container {[m
[32m+[m[32m            max-width: 800px;[m
[32m+[m[32m            margin: 20px auto;[m
[32m+[m[32m            padding: 20px;[m
[32m+[m[32m            background-color: white;[m
[32m+[m[32m            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);[m
[32m+[m[32m            border-radius: 8px;[m
[32m+[m[32m        }[m
[32m+[m[32m        /* 標題文字顏色設置 */[m
[32m+[m[32m        h2 {[m
[32m+[m[32m            color: #4CAF50;[m
[32m+[m[32m        }[m
[32m+[m[32m        /* 功能列表的樣式，包括左側條狀顏色標記 */[m
[32m+[m[32m        .features {[m
[32m+[m[32m            list-style-type: none;[m
[32m+[m[32m            padding: 0;[m
[32m+[m[32m        }[m
[32m+[m[32m        .features li {[m
[32m+[m[32m            margin: 10px 0;[m
[32m+[m[32m            padding: 10px;[m
[32m+[m[32m            background-color: #f0f0f0;[m
[32m+[m[32m            border-left: 4px solid #4CAF50;[m
[32m+[m[32m        }[m
[32m+[m[32m    </style>[m
[32m+[m[32m</head>[m
[32m+[m[32m<body>[m
[32m+[m[32m    <!-- 頁面標題部分，顯示歡迎訊息 -->[m
[32m+[m[32m    <div class="header">[m
[32m+[m[32m       <!-- <img src="/springboot.jpg" alt="Spring Boot Logo" /> -->[m
[32m+[m[32m        <h1>歡迎來到生活筆記本</h1>[m
[32m+[m[32m        <p>管理你的個人與公司財務的最佳工具</p>[m
[32m+[m[32m    </div>[m
[32m+[m[32m    <!-- 導覽列，提供帳號相關操作的連結 -->[m
[32m+[m[32m    <div class="nav">[m
[32m+[m[32m        <a href="/register-free-account">註冊免費帳號</a>[m
[32m+[m[32m        <a href="/register-paid-account">註冊收費帳號</a>[m
[32m+[m[32m        <a href="/login">登入</a>[m
[32m+[m[32m    </div>[m
[32m+[m[32m    <!-- 主內容區域，介紹產品的主要功能和特性 -->[m
[32m+[m[32m    <div class="container">[m
[32m+[m[32m        <h2>產品簡介</h2>[m
[32m+[m[32m        <p>生活筆記本是一個簡單易用的記帳工具，適合個人和企業使用。</p>[m
[32m+[m[32m        <ul class="features">[m
[32m+[m[32m            <li><strong>免費帳號：</strong> 個人用戶可輕鬆管理日常開支與收入。</li>[m
[32m+[m[32m            <li><strong>收費帳號：</strong> 提供企業級功能，包含多用戶權限設定。</li>[m
[32m+[m[32m        </ul>[m
[32m+[m[32m        <p>立即創建帳號，開始管理你的財務生活吧！</p>[m
[32m+[m[32m    </div>[m
[32m+[m[32m</body>[m
[32m+[m[32m</html>[m
\ No newline at end of file[m
[1mdiff --git a/LifeNotebook/src/test/java/com/example/demo/LifeNotebookApplicationTests.java b/LifeNotebook/src/test/java/com/example/demo/LifeNotebookApplicationTests.java[m
[1mnew file mode 100644[m
[1mindex 0000000..030cc9b[m
[1m--- /dev/null[m
[1m+++ b/LifeNotebook/src/test/java/com/example/demo/LifeNotebookApplicationTests.java[m
[36m@@ -0,0 +1,13 @@[m
[32m+[m[32mpackage com.example.demo;[m
[32m+[m
[32m+[m[32mimport org.junit.jupiter.api.Test;[m
[32m+[m[32mimport org.springframework.boot.test.context.SpringBootTest;[m
[32m+[m
[32m+[m[32m@SpringBootTest[m
[32m+[m[32mclass LifeNotebookApplicationTests {[m
[32m+[m
[32m+[m	[32m@Test[m
[32m+[m	[32mvoid contextLoads() {[m
[32m+[m	[32m}[m
[32m+[m
[32m+[m[32m}[m
